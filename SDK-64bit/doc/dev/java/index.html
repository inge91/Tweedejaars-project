
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Java SDK &mdash; NAO Software 1.12.3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.12.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="NAO Software 1.12.3 documentation" href="../../index.html" />
    <link rel="up" title="SDK" href="../sdk.html" />
    <link rel="next" title="Matlab SDK" href="../matlab/index.html" />
    <link rel="prev" title=".Net SDK" href="../dotnet/index.html" />

 

<script  type="text/javascript">
   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-19487749-1']);
   _gaq.push(['_trackPageview']);
   (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();
</script>


  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t3">
    <div id="hd">
      <h1><a href="../../index.html">NAO Software 1.12.3 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">Home</a>
        
         |
        <a title="Site map" href="../../contents.html">Site map</a>
        
         |
        <a title="Search" href="../../search.html">Search</a>
         |
        <a title="Index" href="../../genindex.html">Index</a>
        
        
      </div>
      <div class="nav">
    &laquo; <a href="../dotnet/index.html" title=".Net SDK">previous</a>
     |
    <a href="../sdk.html" title="SDK" accesskey="U">up</a>
   |
    <a href="../matlab/index.html" title="Matlab SDK">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="dev-java-index">
            
  <div class="section" id="java-sdk">
<span id="java"></span><h1>Java SDK<a class="headerlink" href="#java-sdk" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../sdk.html#sdk-index"><em>Overview</em></a> | <a class="reference internal" href="../cpp/index.html#cpp-introduction"><em>C++</em></a> | <a class="reference internal" href="../python/index.html#python-introduction"><em>Python</em></a>
| <a class="reference internal" href="../dotnet/index.html#naoqi-dot-net"><em>.Net</em></a> | Java | <a class="reference internal" href="../matlab/index.html#matlab"><em>Matlab</em></a> | <a class="reference internal" href="../urbi/index.html#urbi"><em>Urbi</em></a></p>
<div class="section" id="what-it-does">
<h2>What it does<a class="headerlink" href="#what-it-does" title="Permalink to this headline">¶</a></h2>
<p><strong>JNaoqi</strong> is an open source project that allows you to call any NaoQi module
method from java. The call syntax is the same as Python or .Net.</p>
<p><strong>JNaoqi</strong> project contains both binary and source code that needs to be compiled
with Naoqi C++ SDK.</p>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>OpenNao doesn&#8217;t have a java interpreter, the naoqi-java-sdk (jnaoqi) only allows
you to call methods from PC to the robot (real or virtual).
Each call uses the network.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Requirements for compilation:</dt>
<dd><ul class="first last simple">
<li>Swig. Swig is a wrapper that allows using C++ method in another language, including Java</li>
<li>Naoqi C++ SDK</li>
<li>Java JDK</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="tutorial-linux">
<h2>Tutorial - Linux<a class="headerlink" href="#tutorial-linux" title="Permalink to this headline">¶</a></h2>
<p>In the tutorial we insert a value in ALMemory with TestProxy.java</p>
<ol class="arabic simple">
<li>Download Naoqi C++ SDK</li>
<li>Uncompress Naoqi C++ SDK</li>
</ol>
<div class="highlight-console"><div class="highlight"><pre><span class="go">z$ pwd</span>
<span class="go">/home/ALDEBARAN/dhoussin/Téléchargements</span>

<span class="go">z$ ls</span>
<span class="go">naoqi-sdk-1.12.0.48-linux32.tar.gz</span>

<span class="go">z$ tar xvf naoqi-sdk-1.12.0.48-linux32.tar.gz</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Download Jnaoqi project</li>
<li>Uncompress Jnaoqi project</li>
</ol>
<div class="highlight-console"><div class="highlight"><pre><span class="go">z$ ls</span>
<span class="go">jnaoqi-java-1.12.0.30.tar.gz</span>

<span class="go">z$ tar xvf jnaoqi-java-1.12.0.30.tar.gz</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Set LD_LIBRARY_PATH</li>
</ol>
<div class="highlight-console"><div class="highlight"><pre><span class="go">z$ export LD_LIBRARY_PATH=/home/ALDEBARAN/dhoussin/Téléchargements/jnaoqi/java/com/aldebaran/proxy:/home/ALDEBARAN/dhoussin/Téléchargements/naoqi-sdk-1.12.0.48-linux32/lib</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Run local naoqi or run robot.</li>
</ol>
<div class="highlight-console"><div class="highlight"><pre><span class="go">z$ cd /home/ALDEBARAN/dhoussin/Téléchargements/naoqi-sdk-1.12.0.48-linux32/bin</span>
<span class="go">z$ ./naoqi-bin &amp;</span>
<span class="go">z$  [INFO ] ..::: starting NAOqi version 1.12 :::..                                   [11-11-04 11:35]</span>
<span class="go">    [INFO ] Copyright (c) 2011, Aldebaran Robotics</span>
<span class="go">    [INFO ] Starting ALNetwork</span>
<span class="go">    [INFO ] NAOqi is listening on 0.0.0.0:9559</span>
<span class="go">    [INFO ] Loading &quot;/home/ALDEBARAN/dhoussin/Téléchargements/naoqi-sdk-1.12.0.48-linux32/etc/naoqi/autoload.ini&quot;</span>
<span class="go">    [INFO ] Starting ALMemory</span>
<span class="go">    [INFO ] Starting ALLogger</span>
<span class="go">    [INFO ] Starting ALPreferences</span>
<span class="go">    [INFO ] Starting ALFileManager</span>
<span class="go">    [INFO ] Starting ALLauncher</span>
<span class="go">    [INFO ] Starting ALBonjour</span>
<span class="go">    [INFO ] Starting ALResourceManager</span>
<span class="go">    [INFO ] Starting ALLeds</span>
<span class="go">    [INFO ] Starting ALSonar</span>
<span class="go">    [INFO ] Starting ALFsr</span>
<span class="go">    [INFO ] Starting ALRobotPose</span>
<span class="go">    [INFO ] Starting ALBattery</span>
<span class="go">    [INFO ] Starting ALSensors</span>
<span class="go">    [INFO ] Starting ALRobotModel</span>
<span class="go">    [INFO ] Starting ALMotion</span>
<span class="go">    [INFO ] Starting ALRedBallTracker</span>
<span class="go">    [INFO ] Starting ALMotionRecorder</span>
<span class="go">    [INFO ] Starting ALTextToSpeech</span>
<span class="go">    [INFO ] Starting ALFrameManager</span>
<span class="go">    [INFO ] Starting ALPythonBridge</span>
<span class="go">    [INFO ] Starting ALVideoDevice</span>
<span class="go">    [INFO ] Starting ALRedBallDetection</span>
<span class="go">    [INFO ] Starting ALBehaviorManager</span>
<span class="go">    [INFO ] NAOqi is ready...</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Edit TestProxy.java. Replace ip adresse connection by 127.0.0.1 or your robot ip.</li>
<li>Execute Java example</li>
</ol>
<div class="highlight-console"><div class="highlight"><pre><span class="go">z$ cd jnaoqi/java/</span>
<span class="go">z$ pwd</span>
<span class="go">/home/ALDEBARAN/dhoussin/Téléchargements/jnaoqi/java</span>
<span class="go">z$ javac TestProxy.java</span>
<span class="go">z$ java TestProxy</span>
</pre></div>
</div>
</div>
<div class="section" id="java-jdk-installation-optional">
<h2>Java JDK installation (optional)<a class="headerlink" href="#java-jdk-installation-optional" title="Permalink to this headline">¶</a></h2>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>Install the latest JDK from oracle/java web site.
<a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>
</div>
<div class="section" id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>Tested on:</dt>
<dd><ul class="first last simple">
<li>java version &#8220;1.6.0_22&#8221;</li>
<li>OpenJDK Runtime Environment (IcedTea6 1.10.2) (6b22-1.10.2-0ubuntu1~11.04.1)</li>
<li>OpenJDK Server VM (build 20.0-b11, mixed mode)</li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">On Linux, do not install java from web site. Use Synaptic or apt-get</p>
</div>
</div>
</div>
<div class="section" id="jnaoqi-installation">
<h2>JNaoQi Installation<a class="headerlink" href="#jnaoqi-installation" title="Permalink to this headline">¶</a></h2>
<p>jnaoqi-java-x.xx.x.tar.gz contain source code, compiled library and .jar package.</p>
<div class="section" id="linux-windows">
<h3>Linux/windows<a class="headerlink" href="#linux-windows" title="Permalink to this headline">¶</a></h3>
<p>Uncompress jnaoqi. On linux you can use the command:</p>
<div class="highlight-python"><pre>$~ tar xvf jnaoqi-java-1.12.0</pre>
</div>
</div>
<div class="section" id="content">
<h3>Content<a class="headerlink" href="#content" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The project source code in the CMake format</li>
<li><strong>/java</strong> folder contains examples, aldebaran package and precompiled library.</li>
<li><strong>/example</strong> folder contains examples. Do no edit it.</li>
<li><strong>/proxy</strong> folder contains headers to access all naoqi modules. Do not edit it.</li>
<li>jnaoqi.jar is a standard java package</li>
</ul>
</div>
<div class="section" id="com-aldebaran-proxy">
<h3>com.aldebaran.proxy<a class="headerlink" href="#com-aldebaran-proxy" title="Permalink to this headline">¶</a></h3>
<p>com.aldebaran.proxy is in the naoqi-java-sdk package.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.aldebaran.proxy.*</span><span class="o">;</span>
</pre></div>
</div>
<p>Package files always need to stay in the folder /com/aldebaran/proxy and the java path needs to point to this folder.</p>
</div>
</div>
<div class="section" id="compilation-optional">
<h2>Compilation (optional)<a class="headerlink" href="#compilation-optional" title="Permalink to this headline">¶</a></h2>
<p>JNaoqi sdk contains precompiled library but you may need to compile it yourself (different OS or Java version).
JNaoqi respects CMake and qibuild format and can be compiled exactly the same way as others NaoQi libraries.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span>~ <span class="nb">cd </span>jnaoqi
<span class="gp">$</span>~ mkdir build
<span class="gp">$</span>~ <span class="nb">cd </span>build
<span class="gp">$</span>~ cmake -DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>/your-c++-naoqi-sdk/toolchain-pc.cmake ..
<span class="gp">$</span>~ make
</pre></div>
</div>
<p>After compilation, your jnaoqi/build/sdk/java folder contains the java naoqi SDK. It should be the same as precompile /java folder at the root.</p>
</div>
<div class="section" id="how-to-execute">
<h2>How to execute<a class="headerlink" href="#how-to-execute" title="Permalink to this headline">¶</a></h2>
<p>Do not forget to define jnaoqi library path for java.</p>
<div class="section" id="set-java-library-path-on-linux-for-precompiled-library">
<h3>Set java library path on linux for precompiled library<a class="headerlink" href="#set-java-library-path-on-linux-for-precompiled-library" title="Permalink to this headline">¶</a></h3>
<p>For a precompiled project:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span>~ <span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/your-jnaoqi-path/java/com/aldebaran/proxy:/path-to-naoqi-SDK/lib
</pre></div>
</div>
<p>For a compiled project:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span>~ <span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/your-jnaoqi-path/build/sdk/java/com/aldebaran/proxy
</pre></div>
</div>
</div>
<div class="section" id="set-java-library-path-on-windows-for-precompiled-library">
<h3>Set java library path on windows for precompiled library<a class="headerlink" href="#set-java-library-path-on-windows-for-precompiled-library" title="Permalink to this headline">¶</a></h3>
<p>add /your-jnaoqi-path/java/com/aldebaran/proxy to environement variable %PATH%</p>
</div>
<div class="section" id="set-java-library-path-on-linux-if-you-compiled-yourself">
<h3>Set java library path on linux if you compiled yourself<a class="headerlink" href="#set-java-library-path-on-linux-if-you-compiled-yourself" title="Permalink to this headline">¶</a></h3>
<p>If you have compiled yourself the wrapper, you needn&#8217;t to add naoqi SDK lib folder in the LD_LIBRARY_PATH</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span>~ <span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/your-jnaoqi-path/java/com/aldebaran/proxy
</pre></div>
</div>
</div>
<div class="section" id="compilation-and-execution">
<h3>Compilation and execution<a class="headerlink" href="#compilation-and-execution" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span>~ path-to-naoqi-SDK/naoqi &amp;
<span class="gp">$</span>~ javac TestProxy.java
<span class="gp">$</span>~ java TestProxy
</pre></div>
</div>
<p>ALMemory from local naoqi should contain a java variable.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="say-helloworld">
<h3>Say HelloWorld<a class="headerlink" href="#say-helloworld" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.aldebaran.proxy.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">tts</span>
<span class="o">{</span>
 <span class="kd">static</span>
 <span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">&quot;JNaoQi&quot;</span><span class="o">);</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
 <span class="o">{</span>
  <span class="c1">// TTS proxy</span>
  <span class="n">ALTextToSpeechProxy</span> <span class="n">ttsProxy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ALTextToSpeechProxy</span><span class="o">(</span><span class="s">&quot;myRobotIP.local&quot;</span><span class="o">,</span> <span class="mi">9559</span><span class="o">);</span>

  <span class="c1">// Talk</span>
  <span class="n">ttsProxy</span><span class="o">.</span><span class="na">say</span><span class="o">(</span><span class="s">&quot;hello world&quot;</span><span class="o">);</span>

 <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="almemory-insertdata">
<h3>ALMemory - insertData<a class="headerlink" href="#almemory-insertdata" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.aldebaran.proxy.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestProxy</span>
<span class="o">{</span>
  <span class="kd">static</span>
  <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">&quot;JNaoQi&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
 <span class="o">{</span>
  <span class="n">ALMemoryProxy</span> <span class="n">memory</span><span class="o">;</span>
  <span class="n">memory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ALMemoryProxy</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">,</span><span class="mi">9559</span><span class="o">);</span>
  <span class="n">memory</span><span class="o">.</span><span class="na">insertData</span><span class="o">(</span><span class="s">&quot;javavariable&quot;</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="video-grab-an-image">
<h3>Video - grab an image<a class="headerlink" href="#video-grab-an-image" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.aldebaran.proxy.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">video</span>
<span class="o">{</span>
 <span class="kd">static</span>
 <span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">&quot;JNaoQi&quot;</span><span class="o">);</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
 <span class="o">{</span>
  <span class="c1">// video proxy</span>
  <span class="n">ALVideoDeviceProxy</span> <span class="n">video</span><span class="o">;</span>
  <span class="n">video</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ALVideoDeviceProxy</span><span class="o">(</span><span class="s">&quot;myRobotIP.local&quot;</span><span class="o">,</span> <span class="mi">9559</span><span class="o">);</span>

  <span class="c1">// subscribe only once</span>
  <span class="n">video</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="s">&quot;java&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">250</span><span class="o">);</span>

  <span class="c1">// get Image in Variant (also named ALValue)</span>
  <span class="n">Variant</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="na">getImageRemote</span><span class="o">(</span><span class="s">&quot;java&quot;</span><span class="o">);</span>

  <span class="c1">// unsubscribe only once</span>
  <span class="n">video</span><span class="o">.</span><span class="na">unsubscribe</span><span class="o">(</span><span class="s">&quot;java&quot;</span><span class="o">);</span>

  <span class="c1">// Video device documentation explain that image is element 6</span>
  <span class="n">Variant</span> <span class="n">imageV</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="na">getElement</span><span class="o">(</span><span class="mi">6</span><span class="o">);</span>

  <span class="c1">// display image from byte array</span>
  <span class="n">AwtImage</span> <span class="n">image</span><span class="o">;</span>
  <span class="kt">byte</span><span class="o">[]</span> <span class="n">binaryImage</span> <span class="o">=</span> <span class="n">imageV</span><span class="o">.</span><span class="na">toBinary</span><span class="o">();</span>
  <span class="n">image</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AwtImage</span><span class="o">(</span><span class="n">binaryImage</span><span class="o">);</span>
 <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="motion-cartesian-interpolation">
<h3>Motion - cartesian interpolation<a class="headerlink" href="#motion-cartesian-interpolation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// don&#39;t forget to set stiffness before</span>
<span class="c1">// connect to NaoQi</span>
<span class="n">ALMotionProxy</span> <span class="n">motionProxy</span><span class="o">;</span>
<span class="n">motionProxy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ALMotionProxy</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">,</span> <span class="mi">9559</span><span class="o">);</span>

<span class="n">String</span> <span class="n">effector</span>   <span class="o">=</span> <span class="s">&quot;LArm&quot;</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">space</span>      <span class="o">=</span> <span class="n">motion</span><span class="o">.</span><span class="na">SPACE_NAO</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">axisMask</span>   <span class="o">=</span> <span class="n">motion</span><span class="o">.</span><span class="na">AXIS_MASK_VEL</span><span class="o">;</span>    <span class="c1">// just control position</span>
<span class="kt">boolean</span> <span class="n">isAbsolute</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

<span class="c1">//Since we are in relative, the current position is zero</span>
<span class="kt">float</span><span class="o">[]</span> <span class="n">currentPos</span> <span class="o">=</span> <span class="o">{</span><span class="mf">0.01f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">};</span>

<span class="c1">// Define the changes relative to the current position</span>
<span class="kt">float</span> <span class="n">dx</span>         <span class="o">=</span>  <span class="mf">0.03f</span><span class="o">;</span>     <span class="c1">// translation axis X (meters)</span>
<span class="kt">float</span> <span class="n">dy</span>         <span class="o">=</span>  <span class="mf">0.03f</span><span class="o">;</span>     <span class="c1">// translation axis Y (meters)</span>
<span class="kt">float</span> <span class="n">dz</span>         <span class="o">=</span>  <span class="mf">0.0f</span><span class="o">;</span>      <span class="c1">// translation axis Z (meters)</span>
<span class="kt">float</span> <span class="n">dwx</span>        <span class="o">=</span>  <span class="mf">0.0f</span><span class="o">;</span>      <span class="c1">// rotation axis X (radians)</span>
<span class="kt">float</span> <span class="n">dwy</span>        <span class="o">=</span>  <span class="mf">0.0f</span><span class="o">;</span>      <span class="c1">// rotation axis Y (radians)</span>
<span class="kt">float</span> <span class="n">dwz</span>        <span class="o">=</span>  <span class="mf">0.0f</span><span class="o">;</span>      <span class="c1">// rotation axis Z (radians)</span>
<span class="kt">float</span><span class="o">[]</span> <span class="n">targetPos</span>  <span class="o">=</span> <span class="o">{</span><span class="n">dx</span><span class="o">,</span> <span class="n">dy</span><span class="o">,</span> <span class="n">dz</span><span class="o">,</span> <span class="n">dwx</span><span class="o">,</span> <span class="n">dwy</span><span class="o">,</span> <span class="n">dwz</span><span class="o">};</span>

<span class="c1">// Go to the target and back again</span>
<span class="n">Variant</span> <span class="n">targetPosV</span> <span class="o">=</span>  <span class="k">new</span>  <span class="n">Variant</span><span class="o">(</span><span class="n">targetPos</span><span class="o">);</span>
<span class="n">Variant</span> <span class="n">currentPosV</span> <span class="o">=</span> <span class="k">new</span>  <span class="n">Variant</span><span class="o">(</span><span class="n">currentPos</span><span class="o">);</span>
<span class="n">Variant</span> <span class="n">pathV</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Variant</span><span class="o">();</span>
<span class="n">pathV</span><span class="o">.</span><span class="na">push_back</span><span class="o">(</span><span class="n">targetPosV</span><span class="o">);</span>
<span class="n">pathV</span><span class="o">.</span><span class="na">push_back</span><span class="o">(</span><span class="n">currentPosV</span><span class="o">);</span>

<span class="n">Variant</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Variant</span><span class="o">(</span><span class="mf">2.0f</span><span class="o">);</span>
<span class="n">Variant</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Variant</span><span class="o">(</span><span class="mf">4.0f</span><span class="o">);</span>

<span class="n">Variant</span> <span class="n">timesV</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Variant</span><span class="o">();</span>
<span class="n">timesV</span><span class="o">.</span><span class="na">push_back</span><span class="o">(</span><span class="n">t1</span><span class="o">);</span>
<span class="n">timesV</span><span class="o">.</span><span class="na">push_back</span><span class="o">(</span><span class="n">t2</span><span class="o">);</span>

<span class="n">motionProxy</span><span class="o">.</span><span class="na">positionInterpolation</span><span class="o">(</span><span class="n">effector</span><span class="o">,</span> <span class="n">space</span><span class="o">,</span> <span class="n">pathV</span><span class="o">,</span> <span class="n">axisMask</span><span class="o">,</span> <span class="n">timesV</span><span class="o">,</span> <span class="n">isAbsolute</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="motion-raise-the-stiffness-of-the-body">
<h3>Motion - Raise the stiffness of the body<a class="headerlink" href="#motion-raise-the-stiffness-of-the-body" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.aldebaran.proxy</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MotionStiffness</span>
<span class="o">{</span>
 <span class="kd">static</span>
 <span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">&quot;JNaoQi&quot;</span><span class="o">);</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
 <span class="o">{</span>
  <span class="n">ALMotionProxy</span> <span class="n">motionProxy</span><span class="o">;</span>
  <span class="n">motionProxy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ALMotionProxy</span><span class="o">(</span><span class="s">&quot;myRobotIP.local&quot;</span><span class="o">,</span><span class="mi">9559</span><span class="o">);</span>

  <span class="c1">// We use the &quot;Body&quot; name to signify the collection of all joints</span>
   <span class="n">motionProxy</span><span class="o">.</span><span class="na">stiffnessInterpolation</span><span class="o">(</span><span class="k">new</span> <span class="n">Variant</span><span class="o">(</span><span class="s">&quot;Body&quot;</span><span class="o">),</span> <span class="k">new</span> <span class="n">Variant</span><span class="o">(</span><span class="mf">1.0f</span><span class="o">),</span> <span class="k">new</span> <span class="n">Variant</span> <span class="o">(</span><span class="mf">1.0f</span><span class="o">));</span>
 <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="use-jnaoqi-jar-with-eclipse">
<h2>Use jnaoqi.jar with Eclipse<a class="headerlink" href="#use-jnaoqi-jar-with-eclipse" title="Permalink to this headline">¶</a></h2>
<p>jnaoqi.jar contains dynamic library libJNaoqi.so on Linux, JNaoqi.dll on windows, libJNaoQi.dylib on MacOS. Java cannot load a Library from .jar. You&#8217;ll have to make it by yourself. First import jnaoqi.jar in Eclipse. If you try to run an example that use jnaoqi.jar, java will raise a link error. The following example load dynamicaly the dynamic library:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.aldebaran.proxy</span><span class="o">;</span>


<span class="kn">import</span> <span class="nn">com.aldebaran.proxy.ALMemoryProxy</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">main</span>
<span class="o">{</span>

  <span class="kd">static</span> <span class="o">{</span>
       <span class="k">try</span> <span class="o">{</span>
              <span class="c1">// load library</span>
              <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">&quot;JNaoQi&quot;</span><span class="o">);</span>

            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsatisfiedLinkError</span> <span class="n">e</span><span class="o">)</span>
            <span class="o">{</span>
               <span class="c1">// if we use .jar we firt copy the library from package before load it</span>
               <span class="n">loadBinaries</span><span class="o">();</span>
            <span class="o">}</span>
<span class="o">}</span>

 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">loadBinaries</span><span class="o">()</span>
 <span class="o">{</span>
    <span class="n">String</span> <span class="n">os</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;os.name&quot;</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">bins</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;(){{</span>
        <span class="n">add</span><span class="o">(</span><span class="s">&quot;libJNaoQi.so&quot;</span><span class="o">);</span>
    <span class="o">}};</span>


    <span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">bin</span> <span class="o">:</span> <span class="n">bins</span><span class="o">)</span>
    <span class="o">{</span>
            <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">ALMemoryProxy</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">bin</span><span class="o">);</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">read</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
            <span class="k">try</span>
            <span class="o">{</span>
                <span class="n">String</span><span class="o">[]</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">bin</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">);</span>
                <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;./&quot;</span><span class="o">,</span> <span class="n">temp</span><span class="o">[</span><span class="n">temp</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">]);</span>
                <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>

                <span class="k">while</span><span class="o">((</span><span class="n">read</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buffer</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
                <span class="o">{</span>
                    <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">read</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">fos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="c1">// now load the file</span>
        <span class="n">System</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">());</span>
 <span class="o">}</span>


  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
  <span class="o">{</span>
       <span class="c1">// ALMemory proxy</span>
       <span class="n">ALMemoryProxy</span> <span class="n">memory</span><span class="o">;</span>

       <span class="c1">// connect to local Naoqi</span>
       <span class="n">memory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ALMemoryProxy</span><span class="o">(</span><span class="s">&quot;10.0.252.130&quot;</span><span class="o">,</span><span class="mi">9559</span><span class="o">);</span>

       <span class="c1">// call method ALMemory::insertData</span>
       <span class="n">memory</span><span class="o">.</span><span class="na">insertData</span><span class="o">(</span><span class="s">&quot;Hello from Java&quot;</span><span class="o">,</span> <span class="mi">14</span><span class="o">);</span>
  <span class="o">}</span>
 <span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="type-conversion">
<h2>Type conversion<a class="headerlink" href="#type-conversion" title="Permalink to this headline">¶</a></h2>
<p>Module API methods sometimes require or return an ALValue. ALValue is a Variant in Java and can be converted in a simple java type.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="23%" />
<col width="17%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">C++</th>
<th class="head">JNI</th>
<th class="head">Java</th>
<th class="head">Variant conversion</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>bool</td>
<td>jbool</td>
<td>Boolean</td>
<td>Variant::toBool()</td>
</tr>
<tr class="row-odd"><td>int</td>
<td>jint</td>
<td>int</td>
<td>Variant::toInt()</td>
</tr>
<tr class="row-even"><td>float</td>
<td>jfloat</td>
<td>float</td>
<td>Variant::toFloat()</td>
</tr>
<tr class="row-odd"><td>string</td>
<td>jstring</td>
<td>String</td>
<td>Variant::toString()</td>
</tr>
<tr class="row-even"><td>ALValue::binary</td>
<td>jbytearray</td>
<td>byte[]</td>
<td>Variant::toByteArray()</td>
</tr>
<tr class="row-odd"><td>vector&lt;float&gt;</td>
<td>jfloatarray</td>
<td>float[]</td>
<td>Variant::toFloatArray()</td>
</tr>
<tr class="row-even"><td>vector&lt;int&gt;</td>
<td>jintarray</td>
<td>int[]</td>
<td>Variant::toIntArray()</td>
</tr>
<tr class="row-odd"><td>vector&lt;string&gt;</td>
<td>jobjectarray</td>
<td>String[]</td>
<td>Variant::toStringArray()</td>
</tr>
<tr class="row-even"><td>ALValue</td>
<td>None</td>
<td>Variant</td>
<td>Any conversion method</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="unsatisfiedlinkerror">
<h3>UnsatisfiedLinkError<a class="headerlink" href="#unsatisfiedlinkerror" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>If a java command returns an UnsatisfiedLinkError:</dt>
<dd>Exception in thread &#8220;main&#8221; java.lang.UnsatisfiedLinkError: no JNaoQi in java.library.path</dd>
</dl>
<p>Your LD_LIBRARY_PATH (linux) or %path% (windows) needs to be updated and point to /com/aldebaran/proxy folder.
The folder should contain JNaoQi.dll (windows) or libJNaoQi.so (linux).</p>
</div>
</div>
</div>


          </div>
          <div class="footernav">
    &laquo; <a href="../dotnet/index.html" title=".Net SDK">.Net SDK</a>
     |
    <a href="../sdk.html" title="SDK" accesskey="U">SDK</a>
   |
    <a href="../matlab/index.html" title="Matlab SDK">Matlab SDK</a> &raquo;</div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <ul class="this-page-menu">
      <li><a href="../../_sources/dev/java/index.txt"
             rel="nofollow">Show Source</a></li>
    </ul>


  <h3>Table Of Contents</h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../contents.html">Site map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nao/index.html">NAO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/index.html">Software</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Programming Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../sdk.html">SDK</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../cpp/index.html">Cpp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python/index.html">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dotnet/index.html">.NET</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Java</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../matlab/index.html">MatLab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../urbi/index.html">Urbi</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../example-index.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/index.html">Working with NAO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../naoqi/index.html">NAOqi</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ref/index.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../legal/notice.html">Legal notices</a></li>
</ul>

    <h3><a href="../../index.html">On this page</a></h3>
    <ul>
<li><a class="reference internal" href="#">Java SDK</a><ul>
<li><a class="reference internal" href="#what-it-does">What it does</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#tutorial-linux">Tutorial - Linux</a></li>
<li><a class="reference internal" href="#java-jdk-installation-optional">Java JDK installation (optional)</a><ul>
<li><a class="reference internal" href="#windows">Windows</a></li>
<li><a class="reference internal" href="#linux">Linux</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jnaoqi-installation">JNaoQi Installation</a><ul>
<li><a class="reference internal" href="#linux-windows">Linux/windows</a></li>
<li><a class="reference internal" href="#content">Content</a></li>
<li><a class="reference internal" href="#com-aldebaran-proxy">com.aldebaran.proxy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compilation-optional">Compilation (optional)</a></li>
<li><a class="reference internal" href="#how-to-execute">How to execute</a><ul>
<li><a class="reference internal" href="#set-java-library-path-on-linux-for-precompiled-library">Set java library path on linux for precompiled library</a></li>
<li><a class="reference internal" href="#set-java-library-path-on-windows-for-precompiled-library">Set java library path on windows for precompiled library</a></li>
<li><a class="reference internal" href="#set-java-library-path-on-linux-if-you-compiled-yourself">Set java library path on linux if you compiled yourself</a></li>
<li><a class="reference internal" href="#compilation-and-execution">Compilation and execution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#say-helloworld">Say HelloWorld</a></li>
<li><a class="reference internal" href="#almemory-insertdata">ALMemory - insertData</a></li>
<li><a class="reference internal" href="#video-grab-an-image">Video - grab an image</a></li>
<li><a class="reference internal" href="#motion-cartesian-interpolation">Motion - cartesian interpolation</a></li>
<li><a class="reference internal" href="#motion-raise-the-stiffness-of-the-body">Motion - Raise the stiffness of the body</a></li>
</ul>
</li>
<li><a class="reference internal" href="#use-jnaoqi-jar-with-eclipse">Use jnaoqi.jar with Eclipse</a></li>
<li><a class="reference internal" href="#type-conversion">Type conversion</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#unsatisfiedlinkerror">UnsatisfiedLinkError</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="../dotnet/index.html" title=".Net SDK">previous</a>
     |
    <a href="../sdk.html" title="SDK" accesskey="U">up</a>
   |
    <a href="../matlab/index.html" title="Matlab SDK">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>