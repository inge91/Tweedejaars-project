
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Cartesian control API &mdash; NAO Software 1.12.3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.12.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="NAO Software 1.12.3 documentation" href="../../index.html" />
    <link rel="up" title="Cartesian control" href="control-cartesian.html" />
    <link rel="next" title="Cartesian control Tutorial: The Hula-Hoop motion" href="control-cartesian-tuto.html" />
    <link rel="prev" title="Cartesian control" href="control-cartesian.html" />

 

<script  type="text/javascript">
   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-19487749-1']);
   _gaq.push(['_trackPageview']);
   (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();
</script>


  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t3">
    <div id="hd">
      <h1><a href="../../index.html">NAO Software 1.12.3 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">Home</a>
        
         |
        <a title="Site map" href="../../contents.html">Site map</a>
        
         |
        <a title="Search" href="../../search.html">Search</a>
         |
        <a title="Index" href="../../genindex.html">Index</a>
        
        
      </div>
      <div class="nav">
    &laquo; <a href="control-cartesian.html" title="Cartesian control">previous</a>
     |
    <a href="control-cartesian.html" title="Cartesian control" accesskey="U">up</a>
   |
    <a href="control-cartesian-tuto.html" title="Cartesian control Tutorial: The Hula-Hoop motion">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="naoqi-motion-control-cartesian-api">
            
  <div class="section" id="cartesian-control-api">
<span id="control-cartesian-api"></span><h1>Cartesian control API<a class="headerlink" href="#cartesian-control-api" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="index.html#naoqi-motion"><em>NAOqi Motion</em></a> || <a class="reference internal" href="control-cartesian.html#control-cartesian"><em>Overview</em></a> | API |
<a class="reference internal" href="control-cartesian-tuto.html#control-cartesian-tuto"><em>Tutorial</em></a></p>
<hr class="docutils" />
<div class="section" id="method-list">
<h2>Method list<a class="headerlink" href="#method-list" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ALMotionProxy">
<em class="property">class </em><tt class="descname">ALMotionProxy</tt><a class="headerlink" href="#ALMotionProxy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<ul class="simple">
<li><a class="reference internal" href="#ALMotionProxy::positionInterpolation__ssCR.iCR.AL::ALValueCR.iCR.AL::ALValueCR.bCR" title="ALMotionProxy::positionInterpolation"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::positionInterpolation()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::positionInterpolations__std::vector:ss:CR.iCR.AL::ALValueCR.AL::ALValueCR.AL::ALValueCR.bCR" title="ALMotionProxy::positionInterpolations"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::positionInterpolations()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::setPosition__ssCR.iCR.std::vector:float:CR.floatCR.iCR" title="ALMotionProxy::setPosition"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::setPosition()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::changePosition__ssCR.iCR.std::vector:float:CR.floatCR.iCR" title="ALMotionProxy::changePosition"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::changePosition()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::getPosition__ssCR.iCR.bCR" title="ALMotionProxy::getPosition"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::getPosition()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::transformInterpolation__ssCR.iCR.AL::ALValueCR.iCR.AL::ALValueCR.bCR" title="ALMotionProxy::transformInterpolation"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::transformInterpolation()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::transformInterpolations__std::vector:ss:CR.iCR.AL::ALValueCR.AL::ALValueCR.AL::ALValueCR.bCR" title="ALMotionProxy::transformInterpolations"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::transformInterpolations()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::setTransform__ssCR.iCR.std::vector:float:CR.floatCR.iCR" title="ALMotionProxy::setTransform"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::setTransform()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::changeTransform__ssCR.iCR.std::vector:float:CR.floatCR.iCR" title="ALMotionProxy::changeTransform"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::changeTransform()</span></tt></a></li>
<li><a class="reference internal" href="#ALMotionProxy::getTransform__ssCR.iCR.bCR" title="ALMotionProxy::getTransform"><tt class="xref cpp cpp-func docutils literal"><span class="pre">ALMotionProxy::getTransform()</span></tt></a></li>
</ul>
<dl class="function">
<dt id="ALMotionProxy::positionInterpolation__ssCR.iCR.AL::ALValueCR.iCR.AL::ALValueCR.bCR">
<a class="reference internal" href="../stdtypes.html#void" title="void">void</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">positionInterpolation</tt><big>(</big><a class="reference internal" href="../stdtypes.html#ss" title="std::string">const std::string&amp;</a> <em>chainName</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>space</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>path</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>axisMask</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>durations</em>, <a class="reference internal" href="../stdtypes.html#b" title="bool">const bool&amp;</a> <em>isAbsolute</em><big>)</big><a class="headerlink" href="#ALMotionProxy::positionInterpolation__ssCR.iCR.AL::ALValueCR.iCR.AL::ALValueCR.bCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves an end-effector to the given position and orientation over time. This is a blocking call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chainName</strong> &#8211; Name of the chain. Could be: &#8220;Head&#8221;, &#8220;LArm&#8221;, &#8220;RArm&#8221;, &#8220;LLeg&#8221;, &#8220;RLeg&#8221;, &#8220;Torso&#8221;</li>
<li><strong>space</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>path</strong> &#8211; Vector of 6D position arrays (x,y,z,wx,wy,wz) in meters and radians</li>
<li><strong>axisMask</strong> &#8211; Axis mask. True for axes that you wish to control. e.g. 7 for position only, 56 for rotation only and 63 for both</li>
<li><strong>durations</strong> &#8211; Vector of times in seconds corresponding to the path points</li>
<li><strong>isAbsolute</strong> &#8211; If true, the movement is absolute else relative</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_positioninterpolation.cpp"><tt class="xref download docutils literal"><span class="pre">almotion_positioninterpolation.cpp</span></tt></a></p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;alproxies/almotionproxy.h&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Usage: motion_positioninterpolation pIp&quot;</span>
              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">pIp</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="n">AL</span><span class="o">::</span><span class="n">ALMotionProxy</span> <span class="n">motion</span><span class="p">(</span><span class="n">pIp</span><span class="p">);</span>

  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">stiffnesses</span> <span class="o">=</span> <span class="n">motion</span><span class="p">.</span><span class="n">getStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">stiffnesses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.5f</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Warning: this example will have no effect. &quot;</span>
              <span class="o">&lt;&lt;</span> <span class="s">&quot;Robot must be stiff and standing.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Example of a cartesian foot trajectory</span>
  <span class="c1">// Warning: Needs a PoseInit before executing</span>
  <span class="kt">int</span> <span class="n">space</span>       <span class="o">=</span>  <span class="mi">2</span><span class="p">;</span> <span class="c1">// SPACE_NAO</span>
  <span class="kt">int</span> <span class="n">axisMask</span>    <span class="o">=</span> <span class="mi">63</span><span class="p">;</span> <span class="c1">// control all the effector&#39;s axes</span>
  <span class="kt">bool</span> <span class="n">isAbsolute</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="c1">// Lower the Torso and move to the side</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">effector</span> <span class="o">=</span> <span class="s">&quot;Torso&quot;</span><span class="p">;</span>
  <span class="n">AL</span><span class="o">::</span><span class="n">ALValue</span> <span class="n">path</span>     <span class="o">=</span> <span class="n">AL</span><span class="o">::</span><span class="n">ALValue</span><span class="o">::</span><span class="n">array</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07f</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
  <span class="n">AL</span><span class="o">::</span><span class="n">ALValue</span> <span class="n">timeList</span> <span class="o">=</span> <span class="mf">2.0f</span><span class="p">;</span> <span class="c1">// seconds</span>
  <span class="n">motion</span><span class="p">.</span><span class="n">positionInterpolation</span><span class="p">(</span><span class="n">effector</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span>
                              <span class="n">axisMask</span><span class="p">,</span> <span class="n">timeList</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">);</span>

  <span class="c1">// LLeg motion</span>
  <span class="n">effector</span>   <span class="o">=</span> <span class="s">&quot;LLeg&quot;</span><span class="p">;</span>
  <span class="n">path</span>       <span class="o">=</span> <span class="n">AL</span><span class="o">::</span><span class="n">ALValue</span><span class="o">::</span><span class="n">array</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span>  <span class="mf">0.06f</span><span class="p">,</span>  <span class="mf">0.00f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.8f</span><span class="p">);</span>
  <span class="n">timeList</span>   <span class="o">=</span> <span class="mf">2.0f</span><span class="p">;</span> <span class="c1">// seconds</span>
  <span class="n">motion</span><span class="p">.</span><span class="n">positionInterpolation</span><span class="p">(</span><span class="n">effector</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span>
                              <span class="n">axisMask</span><span class="p">,</span> <span class="n">timeList</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" href="../../_downloads/almotion_positioninterpolation.py"><tt class="xref download docutils literal"><span class="pre">almotion_positioninterpolation.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">motion</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_positioninterpolation.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">walkInit</span><span class="p">()</span>

<span class="c"># Example of a cartesian foot trajectory </span>
<span class="c"># Warning: Needs a PoseInit before executing </span>
<span class="c"># Example available: path/to/aldebaran-sdk/examples/ </span>
<span class="c">#                    python/motion_cartesianFoot.py </span>
 
<span class="n">space</span>      <span class="o">=</span>  <span class="n">motion</span><span class="o">.</span><span class="n">SPACE_NAO</span> 
<span class="n">axisMask</span>   <span class="o">=</span> <span class="mi">63</span>                     <span class="c"># control all the effector&#39;s axes</span>
<span class="n">isAbsolute</span> <span class="o">=</span> <span class="bp">False</span>
 
<span class="c"># Lower the Torso and move to the side </span>
<span class="n">effector</span>   <span class="o">=</span> <span class="s">&quot;Torso&quot;</span> 
<span class="n">path</span>       <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> 
<span class="n">timeList</span>   <span class="o">=</span> <span class="mf">2.0</span>                    <span class="c"># seconds </span>
<span class="n">proxy</span><span class="o">.</span><span class="n">positionInterpolation</span><span class="p">(</span><span class="n">effector</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> 
                            <span class="n">axisMask</span><span class="p">,</span> <span class="n">timeList</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span> 
 
<span class="c"># LLeg motion </span>
<span class="n">effector</span>   <span class="o">=</span> <span class="s">&quot;LLeg&quot;</span> 
<span class="n">path</span>       <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.06</span><span class="p">,</span>  <span class="mf">0.00</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">]</span> 
<span class="n">timeList</span>   <span class="o">=</span> <span class="mf">2.0</span>            <span class="c"># seconds </span>
<span class="n">proxy</span><span class="o">.</span><span class="n">positionInterpolation</span><span class="p">(</span><span class="n">effector</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> 
                            <span class="n">axisMask</span><span class="p">,</span> <span class="n">timeList</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span>
                            
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::positionInterpolations__std::vector:ss:CR.iCR.AL::ALValueCR.AL::ALValueCR.AL::ALValueCR.bCR">
<a class="reference internal" href="../stdtypes.html#void" title="void">void</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">positionInterpolations</tt><big>(</big><a class="reference internal" href="../stdtypes.html#std::vector:ss:" title="std::vector&lt;std::string&gt;">const std::vector&lt;std::string&gt;&amp;</a> <em>effectorNames</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>taskSpaceForAllPaths</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>paths</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>axisMasks</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>relativeTimes</em>, <a class="reference internal" href="../stdtypes.html#b" title="bool">const bool&amp;</a> <em>isAbsolute</em><big>)</big><a class="headerlink" href="#ALMotionProxy::positionInterpolations__std::vector:ss:CR.iCR.AL::ALValueCR.AL::ALValueCR.AL::ALValueCR.bCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves end-effectors to the given positions and orientations over time. This is a blocking call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>effectorNames</strong> &#8211; Vector of chain names. Could be: &#8220;Head&#8221;, &#8220;LArm&#8221;, &#8220;RArm&#8221;, &#8220;LLeg&#8221;, &#8220;RLeg&#8221;, &#8220;Torso&#8221;</li>
<li><strong>taskSpaceForAllPaths</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>paths</strong> &#8211; Vector of 6D position arrays (x,y,z,wx,wy,wz) in meters and radians</li>
<li><strong>axisMasks</strong> &#8211; Vector of Axis Masks. True for axes that you wish to control. e.g. 7 for position only, 56 for rotation only and 63 for both</li>
<li><strong>relativeTimes</strong> &#8211; Vector of times in seconds corresponding to the path points</li>
<li><strong>isAbsolute</strong> &#8211; If true, the movement is absolute else relative</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_positioninterpolations.py"><tt class="xref download docutils literal"><span class="pre">almotion_positioninterpolations.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">motion</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_positioninterpolations.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">walkInit</span><span class="p">()</span>

<span class="c"># Example showing how to use positionInterpolations </span>
<span class="n">space</span>        <span class="o">=</span> <span class="n">motion</span><span class="o">.</span><span class="n">SPACE_NAO</span> 
<span class="n">isAbsolute</span>   <span class="o">=</span> <span class="bp">False</span> 
 
<span class="c"># Motion of Arms with block process </span>
<span class="n">effectorList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;LArm&quot;</span><span class="p">,</span> <span class="s">&quot;RArm&quot;</span><span class="p">]</span> 
<span class="n">axisMaskList</span> <span class="o">=</span> <span class="p">[</span><span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_VEL</span><span class="p">,</span> <span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_VEL</span><span class="p">]</span> 
<span class="n">timeList</span>     <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]]</span>         <span class="c"># seconds </span>
<span class="n">pathList</span>     <span class="o">=</span> <span class="p">[[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.04</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]],</span> 
                <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.04</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]]</span> 
<span class="n">proxy</span><span class="o">.</span><span class="n">positionInterpolations</span><span class="p">(</span><span class="n">effectorList</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">pathList</span><span class="p">,</span> 
                             <span class="n">axisMaskList</span><span class="p">,</span> <span class="n">timeList</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span> 
 
<span class="c"># Motion of Arms and Torso with block process </span>
<span class="n">effectorList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;LArm&quot;</span><span class="p">,</span> <span class="s">&quot;RArm&quot;</span><span class="p">,</span> <span class="s">&quot;Torso&quot;</span><span class="p">]</span> 
<span class="n">axisMaskList</span> <span class="o">=</span> <span class="p">[</span><span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_VEL</span><span class="p">,</span> 
                <span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_VEL</span><span class="p">,</span> 
                <span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_ALL</span><span class="p">]</span> 
<span class="n">timeList</span>    <span class="o">=</span> <span class="p">[[</span><span class="mf">4.0</span><span class="p">],</span> 
                <span class="p">[</span><span class="mf">4.0</span><span class="p">],</span> 
                <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]]</span> <span class="c"># seconds </span>
<span class="n">dx</span>           <span class="o">=</span> <span class="mf">0.03</span>                   <span class="c"># translation axis X (meters) </span>
<span class="n">dy</span>           <span class="o">=</span> <span class="mf">0.04</span>                   <span class="c"># translation axis Y (meters) </span>
<span class="n">pathList</span>     <span class="o">=</span> <span class="p">[[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]],</span> 
                <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]],</span> 
                <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">+</span><span class="n">dy</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c"># point 1 </span>
                 <span class="p">[</span><span class="o">-</span><span class="n">dx</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c"># point 2 </span>
                 <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="c"># point 3 </span>
                 <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]</span> <span class="c"># point 4 </span>
               <span class="p">]</span> 
<span class="n">proxy</span><span class="o">.</span><span class="n">positionInterpolations</span><span class="p">(</span><span class="n">effectorList</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">pathList</span><span class="p">,</span> 
                                 <span class="n">axisMaskList</span><span class="p">,</span> <span class="n">timeList</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::setPosition__ssCR.iCR.std::vector:float:CR.floatCR.iCR">
<a class="reference internal" href="../stdtypes.html#void" title="void">void</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">setPosition</tt><big>(</big><a class="reference internal" href="../stdtypes.html#ss" title="std::string">const std::string&amp;</a> <em>chainName</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>space</em>, <a class="reference internal" href="../stdtypes.html#std::vector:float:" title="std::vector&lt;float&gt;">const std::vector&lt;float&gt;&amp;</a> <em>position</em>, <a class="reference internal" href="../stdtypes.html#float" title="float">const float&amp;</a> <em>fractionMaxSpeed</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>axisMask</em><big>)</big><a class="headerlink" href="#ALMotionProxy::setPosition__ssCR.iCR.std::vector:float:CR.floatCR.iCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves an end-effector to the given position and orientation. This is a non-blocking call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chainName</strong> &#8211; Name of the chain. Could be: &#8220;Head&#8221;, &#8220;LArm&#8221;,&#8221;RArm&#8221;, &#8220;LLeg&#8221;, &#8220;RLeg&#8221;, &#8220;Torso&#8221;</li>
<li><strong>space</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>position</strong> &#8211; 6D position array (x,y,z,wx,wy,wz) in meters and radians</li>
<li><strong>fractionMaxSpeed</strong> &#8211; The fraction of maximum speed to use</li>
<li><strong>axisMask</strong> &#8211; Axis mask. True for axes that you wish to control. e.g. 7 for position only, 56 for rotation only and 63 for both</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_setposition.cpp"><tt class="xref download docutils literal"><span class="pre">almotion_setposition.cpp</span></tt></a></p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;alproxies/almotionproxy.h&gt;</span>
<span class="cp">#include &lt;qi/os.hpp&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Usage: motion_setposition pIp&quot;</span>
              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">pIp</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="n">AL</span><span class="o">::</span><span class="n">ALMotionProxy</span> <span class="n">motion</span><span class="p">(</span><span class="n">pIp</span><span class="p">);</span>

  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">stiffnesses</span> <span class="o">=</span> <span class="n">motion</span><span class="p">.</span><span class="n">getStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">stiffnesses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.5f</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Warning: this example will have no effect. &quot;</span>
              <span class="o">&lt;&lt;</span> <span class="s">&quot;Robot must be stiff and standing.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Example showing how to set Torso Position, using a fraction of max speed</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">chainName</span>  <span class="o">=</span> <span class="s">&quot;Torso&quot;</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">space</span>              <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">position</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="c1">// Absolute Position</span>
  <span class="n">position</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.25f</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">fractionMaxSpeed</span> <span class="o">=</span> <span class="mf">0.2f</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">axisMask</span>           <span class="o">=</span> <span class="mi">63</span><span class="p">;</span>
  <span class="n">motion</span><span class="p">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">);</span>
  <span class="n">qi</span><span class="o">::</span><span class="n">os</span><span class="o">::</span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.0f</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" href="../../_downloads/almotion_setposition.py"><tt class="xref download docutils literal"><span class="pre">almotion_setposition.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">motion</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_setposition.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">walkInit</span><span class="p">()</span>

<span class="c"># Example showing how to set LArm Position, using a fraction of max speed  </span>
<span class="n">chainName</span> <span class="o">=</span> <span class="s">&quot;LArm&quot;</span> 
<span class="n">space</span>     <span class="o">=</span> <span class="n">motion</span><span class="o">.</span><span class="n">SPACE_TORSO</span> 
<span class="n">useSensor</span> <span class="o">=</span> <span class="bp">False</span> 
 
<span class="c"># Get the current position of the chainName in the same space </span>
<span class="n">current</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">useSensor</span><span class="p">)</span> 
 
<span class="n">target</span>  <span class="o">=</span> <span class="p">[</span> 
<span class="n">current</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span> 
<span class="n">current</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span> 
<span class="n">current</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span> 
<span class="n">current</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.0</span><span class="p">,</span> 
<span class="n">current</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.0</span><span class="p">,</span> 
<span class="n">current</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.0</span><span class="p">]</span> 
 
<span class="n">fractionMaxSpeed</span> <span class="o">=</span> <span class="mf">0.5</span> 
<span class="n">axisMask</span>         <span class="o">=</span> <span class="mi">7</span> <span class="c"># just control position </span>
 
<span class="n">proxy</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">)</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="c"># Example showing how to set Torso Position, using a fraction of max speed</span>
<span class="n">chainName</span>        <span class="o">=</span> <span class="s">&quot;Torso&quot;</span> 
<span class="n">space</span>            <span class="o">=</span> <span class="mi">2</span> 
<span class="n">position</span>         <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> <span class="c"># Absolute Position</span>
<span class="n">fractionMaxSpeed</span> <span class="o">=</span> <span class="mf">0.2</span> 
<span class="n">axisMask</span>         <span class="o">=</span> <span class="mi">63</span> 
<span class="n">proxy</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::changePosition__ssCR.iCR.std::vector:float:CR.floatCR.iCR">
<a class="reference internal" href="../stdtypes.html#void" title="void">void</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">changePosition</tt><big>(</big><a class="reference internal" href="../stdtypes.html#ss" title="std::string">const std::string&amp;</a> <em>effectorName</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>space</em>, <a class="reference internal" href="../stdtypes.html#std::vector:float:" title="std::vector&lt;float&gt;">const std::vector&lt;float&gt;&amp;</a> <em>positionChange</em>, <a class="reference internal" href="../stdtypes.html#float" title="float">const float&amp;</a> <em>fractionMaxSpeed</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>axisMask</em><big>)</big><a class="headerlink" href="#ALMotionProxy::changePosition__ssCR.iCR.std::vector:float:CR.floatCR.iCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a move of an end effector in cartesian space. This is a non-blocking call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>effectorName</strong> &#8211; Name of the effector.</li>
<li><strong>space</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>positionChange</strong> &#8211; 6D position change array (xd, yd, zd, wxd, wyd, wzd) in meters and radians</li>
<li><strong>fractionMaxSpeed</strong> &#8211; The fraction of maximum speed to use</li>
<li><strong>axisMask</strong> &#8211; Axis mask. True for axes that you wish to control. e.g. 7 for position only, 56 for rotation only and 63 for both</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_changeposition.cpp"><tt class="xref download docutils literal"><span class="pre">almotion_changeposition.cpp</span></tt></a></p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;alproxies/almotionproxy.h&gt;</span>
<span class="cp">#include &lt;qi/os.hpp&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Usage: motion_changeposition pIp&quot;</span>
              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">pIp</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="n">AL</span><span class="o">::</span><span class="n">ALMotionProxy</span> <span class="n">motion</span><span class="p">(</span><span class="n">pIp</span><span class="p">);</span>

  <span class="c1">// Example showing how to move forward (2cm) &quot;LArm&quot;.</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">effectorName</span>  <span class="o">=</span> <span class="s">&quot;LArm&quot;</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">space</span>                 <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// SPACE_NAO</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">positionChange</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
  <span class="n">positionChange</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.02f</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">fractionMaxSpeed</span>    <span class="o">=</span> <span class="mf">0.5f</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">axisMask</span>              <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
  <span class="c1">// Setting effector stiffness on.</span>
  <span class="n">motion</span><span class="p">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="n">effectorName</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span>
  <span class="n">motion</span><span class="p">.</span><span class="n">changePosition</span><span class="p">(</span><span class="n">effectorName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">positionChange</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">);</span>

  <span class="n">qi</span><span class="o">::</span><span class="n">os</span><span class="o">::</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">);</span>

  <span class="c1">// Setting left arm stiffness on.</span>
  <span class="n">motion</span><span class="p">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="n">effectorName</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" href="../../_downloads/almotion_changeposition.py"><tt class="xref download docutils literal"><span class="pre">almotion_changeposition.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_changeposition.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;LArm&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

<span class="c"># Example showing how to move forward (2cm) &quot;LArm&quot;. </span>
<span class="n">effectorName</span>     <span class="o">=</span> <span class="s">&quot;LArm&quot;</span> 
<span class="n">space</span>            <span class="o">=</span> <span class="mi">2</span> <span class="c"># SPACE_NAO </span>
<span class="n">positionChange</span>   <span class="o">=</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> 
<span class="n">fractionMaxSpeed</span> <span class="o">=</span> <span class="mf">0.5</span> 
<span class="n">axisMask</span>         <span class="o">=</span> <span class="mi">7</span> 
<span class="n">proxy</span><span class="o">.</span><span class="n">changePosition</span><span class="p">(</span><span class="n">effectorName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">positionChange</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">)</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;LArm&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::getPosition__ssCR.iCR.bCR">
<a class="reference internal" href="../stdtypes.html#std::vector:float:" title="std::vector&lt;float&gt;">std::vector&lt;float&gt;</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">getPosition</tt><big>(</big><a class="reference internal" href="../stdtypes.html#ss" title="std::string">const std::string&amp;</a> <em>name</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>space</em>, <a class="reference internal" href="../stdtypes.html#b" title="bool">const bool&amp;</a> <em>useSensorValues</em><big>)</big><a class="headerlink" href="#ALMotionProxy::getPosition__ssCR.iCR.bCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a Position relative to the TASK_SPACE. Axis definition: the x axis is positive toward NAO&#8217;s front, the y from right to left and the z is vertical. The angle convention of Position6D is Rot_z(wz).Rot_y(wy).Rot_x(wx).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; Name of the item. Could be: Head, LArm, RArm, LLeg, RLeg, Torso, CameraTop, CameraBottom, MicroFront, MicroRear, MicroLeft, MicroRight, Accelerometer, Gyrometer, Laser, LFsrFR, LFsrFL, LFsrRR, LFsrRL, RFsrFR, RFsrFL, RFsrRR, RFsrRL, USSensor1, USSensor2, USSensor3, USSensor4. Use getSensorNames for the list of sensors supported on your robot.</li>
<li><strong>space</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>useSensorValues</strong> &#8211; If true, the sensor values will be used to determine the position.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Vector containing the Position6D using meters and radians (x, y, z, wx, wy, wz)</p>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_getposition.cpp"><tt class="xref download docutils literal"><span class="pre">almotion_getposition.cpp</span></tt></a></p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;alproxies/almotionproxy.h&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Usage: motion_getposition pIp&quot;</span>
              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">pIp</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="n">AL</span><span class="o">::</span><span class="n">ALMotionProxy</span> <span class="n">motion</span><span class="p">(</span><span class="n">pIp</span><span class="p">);</span>

  <span class="c1">// Example showing how to get the position of the top camera</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;CameraTop&quot;</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">space</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">useSensorValues</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">motion</span><span class="p">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">useSensorValues</span><span class="p">);</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Position (x, y, z): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Rotation (x, y, z): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" href="../../_downloads/almotion_getposition.py"><tt class="xref download docutils literal"><span class="pre">almotion_getposition.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_getposition.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># Example showing how to get the position of the top camera </span>
<span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;CameraTop&quot;</span> 
<span class="n">space</span>  <span class="o">=</span> <span class="mi">1</span> 
<span class="n">useSensorValues</span>  <span class="o">=</span> <span class="bp">True</span> 
<span class="n">result</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">useSensorValues</span><span class="p">)</span> 
<span class="k">print</span> <span class="s">&quot;Position of&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s">&quot; in World is :&quot;</span><span class="p">,</span> <span class="n">result</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::transformInterpolation__ssCR.iCR.AL::ALValueCR.iCR.AL::ALValueCR.bCR">
<a class="reference internal" href="../stdtypes.html#void" title="void">void</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">transformInterpolation</tt><big>(</big><a class="reference internal" href="../stdtypes.html#ss" title="std::string">const std::string&amp;</a> <em>chainName</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>space</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>path</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>axisMask</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>duration</em>, <a class="reference internal" href="../stdtypes.html#b" title="bool">const bool&amp;</a> <em>isAbsolute</em><big>)</big><a class="headerlink" href="#ALMotionProxy::transformInterpolation__ssCR.iCR.AL::ALValueCR.iCR.AL::ALValueCR.bCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves an end-effector to the given position and orientation over time using homogenous transforms to describe the positions or changes. This is a blocking call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chainName</strong> &#8211; Name of the chain. Could be: &#8220;Head&#8221;, &#8220;LArm&#8221;,&#8221;RArm&#8221;, &#8220;LLeg&#8221;, &#8220;RLeg&#8221;, &#8220;Torso&#8221;</li>
<li><strong>space</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>path</strong> &#8211; Vector of Transform arrays</li>
<li><strong>axisMask</strong> &#8211; Axis mask. True for axes that you wish to control. e.g. 7 for position only, 56 for rotation only and 63 for both</li>
<li><strong>duration</strong> &#8211; Vector of times in seconds corresponding to the path points</li>
<li><strong>isAbsolute</strong> &#8211; If true, the movement is absolute else relative</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_transforminterpolation.py"><tt class="xref download docutils literal"><span class="pre">almotion_transforminterpolation.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">motion</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_transforminterpolation.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">walkInit</span><span class="p">()</span>

<span class="c"># Example moving the left hand up a little using transforms</span>
<span class="c"># Note that this is easier to do with positionInterpolation</span>
<span class="n">chainName</span>  <span class="o">=</span> <span class="s">&#39;LArm&#39;</span>
<span class="c"># Defined in &#39;Torso&#39; space</span>
<span class="n">space</span>  <span class="o">=</span> <span class="mi">0</span>
<span class="c"># We will use a single transform</span>
<span class="c"># | R R R x |</span>
<span class="c"># | R R R y |</span>
<span class="c"># | R R R z |</span>
<span class="c"># | 0 0 0 1 |</span>
<span class="c"># Get the current transform, in &#39;Torso&#39; space using</span>
<span class="c"># the command angles.</span>
<span class="n">initialTransform</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">getTransform</span><span class="p">(</span><span class="s">&#39;LArm&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="c"># Copy the current transform</span>
<span class="n">targetTransform</span> <span class="o">=</span> <span class="n">initialTransform</span>
<span class="c"># add 2cm to the z axis, making the arm move upwards</span>
<span class="n">targetTransform</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="n">initialTransform</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.02</span>
<span class="c"># construct a path with only one transform</span>
<span class="n">path</span>  <span class="o">=</span> <span class="p">[</span><span class="n">targetTransform</span><span class="p">]</span>
<span class="c"># The arm does not have enough degees of freedom</span>
<span class="c"># to be able to constrain all the axes of movement,</span>
<span class="c"># so here, we will choose an axis mask of 7, which</span>
<span class="c"># will contrain position only</span>
<span class="c"># x = 1, y = 2, z = 4, wx = 8, wy = 16, wz = 32</span>
<span class="c"># 1 + 2 + 4 = 7</span>
<span class="n">axisMask</span>  <span class="o">=</span> <span class="mi">7</span>
<span class="c"># Allow three seconds for the movement</span>
<span class="n">duration</span>  <span class="o">=</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">]</span>
<span class="n">isAbsolute</span>  <span class="o">=</span> <span class="bp">False</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">transformInterpolation</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span>
<span class="n">axisMask</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span>
<span class="n">finalTransform</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">getTransform</span><span class="p">(</span><span class="s">&#39;LArm&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Initial&#39;</span><span class="p">,</span> <span class="n">initialTransform</span>
<span class="k">print</span> <span class="s">&#39;Target&#39;</span><span class="p">,</span> <span class="n">targetTransform</span>
<span class="k">print</span> <span class="s">&#39;Final&#39;</span><span class="p">,</span> <span class="n">finalTransform</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="c"># Example moving the left hand up a little using transforms </span>
<span class="c"># Note that this is easier to do with positionInterpolation </span>
<span class="kn">import</span> <span class="nn">math</span> 
<span class="n">space</span>      <span class="o">=</span> <span class="n">motion</span><span class="o">.</span><span class="n">SPACE_NAO</span> 
<span class="n">axisMask</span>   <span class="o">=</span> <span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_ALL</span>   <span class="c"># full control </span>
<span class="n">isAbsolute</span> <span class="o">=</span> <span class="bp">False</span> 
<span class="c"># Lower the Torso and move to the side </span>
<span class="n">effector</span>   <span class="o">=</span> <span class="s">&quot;Torso&quot;</span> 
<span class="n">path</span>       <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> 
              <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07</span><span class="p">,</span> 
              <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03</span><span class="p">]</span> 
<span class="n">duration</span>   <span class="o">=</span> <span class="mf">2.0</span>                    <span class="c"># seconds </span>
<span class="n">proxy</span><span class="o">.</span><span class="n">transformInterpolation</span><span class="p">(</span><span class="n">effector</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> 
                             <span class="n">axisMask</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span> 
<span class="c"># LLeg motion </span>
<span class="n">effector</span>   <span class="o">=</span> <span class="s">&quot;LLeg&quot;</span> 
<span class="n">cs</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">45.0</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span> 
<span class="n">ss</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">45.0</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span> 
<span class="n">path</span>       <span class="o">=</span> <span class="p">[</span> <span class="n">cs</span><span class="p">,</span> <span class="o">-</span><span class="n">ss</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> 
               <span class="n">ss</span><span class="p">,</span>  <span class="n">cs</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.06</span><span class="p">,</span> 
              <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> 
<span class="n">duration</span>   <span class="o">=</span> <span class="mf">2.0</span>                    <span class="c"># seconds </span>
<span class="n">proxy</span><span class="o">.</span><span class="n">transformInterpolation</span><span class="p">(</span><span class="n">effector</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> 
                             <span class="n">axisMask</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::transformInterpolations__std::vector:ss:CR.iCR.AL::ALValueCR.AL::ALValueCR.AL::ALValueCR.bCR">
<a class="reference internal" href="../stdtypes.html#void" title="void">void</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">transformInterpolations</tt><big>(</big><a class="reference internal" href="../stdtypes.html#std::vector:ss:" title="std::vector&lt;std::string&gt;">const std::vector&lt;std::string&gt;&amp;</a> <em>effectorNames</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>taskSpaceForAllPaths</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>paths</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>axisMasks</em>, <a class="reference internal" href="../stdtypes.html#AL::ALValue" title="AL::ALValue">const AL::ALValue&amp;</a> <em>relativeTimes</em>, <a class="reference internal" href="../stdtypes.html#b" title="bool">const bool&amp;</a> <em>isAbsolute</em><big>)</big><a class="headerlink" href="#ALMotionProxy::transformInterpolations__std::vector:ss:CR.iCR.AL::ALValueCR.AL::ALValueCR.AL::ALValueCR.bCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves end-effector to the given transforms over time. This is a blocking call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>effectorNames</strong> &#8211; Vector of chain names. Could be: &#8220;Head&#8221;, &#8220;LArm&#8221;, &#8220;RArm&#8221;, &#8220;LLeg&#8221;, &#8220;RLeg&#8221;, &#8220;Torso&#8221;</li>
<li><strong>taskSpaceForAllPaths</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>paths</strong> &#8211; Vector of transforms arrays.</li>
<li><strong>axisMasks</strong> &#8211; Vector of Axis Masks. True for axes that you wish to control. e.g. 7 for position only, 56 for rotation only and 63 for both</li>
<li><strong>relativeTimes</strong> &#8211; Vector of times in seconds corresponding to the path points</li>
<li><strong>isAbsolute</strong> &#8211; If true, the movement is absolute else relative</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_transforminterpolations.py"><tt class="xref download docutils literal"><span class="pre">almotion_transforminterpolations.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">motion</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_transforminterpolations.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">walkInit</span><span class="p">()</span>

<span class="c"># Example showing how to use transformInterpolations </span>
<span class="n">space</span>        <span class="o">=</span> <span class="n">motion</span><span class="o">.</span><span class="n">SPACE_NAO</span> 
<span class="n">isAbsolute</span>   <span class="o">=</span> <span class="bp">False</span> 
 
<span class="c"># Motion of Arms with block process </span>
<span class="n">effectorList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;LArm&quot;</span><span class="p">,</span> <span class="s">&quot;RArm&quot;</span><span class="p">]</span> 
<span class="n">axisMaskList</span> <span class="o">=</span> <span class="p">[</span><span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_VEL</span><span class="p">,</span> <span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_VEL</span><span class="p">]</span> 
<span class="n">timeList</span>     <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]]</span>         <span class="c"># seconds </span>
<span class="n">pathList</span>     <span class="o">=</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> 
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.04</span><span class="p">,</span> 
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]],</span> 
                <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> 
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">,</span> 
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]]</span> 
<span class="n">proxy</span><span class="o">.</span><span class="n">transformInterpolations</span><span class="p">(</span><span class="n">effectorList</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">pathList</span><span class="p">,</span> 
                             <span class="n">axisMaskList</span><span class="p">,</span> <span class="n">timeList</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span> 
 
<span class="c"># Motion of Arms and Torso with block process </span>
<span class="n">effectorList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;LArm&quot;</span><span class="p">,</span> <span class="s">&quot;RArm&quot;</span><span class="p">,</span> <span class="s">&quot;Torso&quot;</span><span class="p">]</span> 
<span class="n">axisMaskList</span> <span class="o">=</span> <span class="p">[</span><span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_VEL</span><span class="p">,</span> 
                <span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_VEL</span><span class="p">,</span> 
                <span class="n">motion</span><span class="o">.</span><span class="n">AXIS_MASK_ALL</span><span class="p">]</span> 
<span class="n">timeList</span>     <span class="o">=</span> <span class="p">[[</span><span class="mf">4.0</span><span class="p">],</span> 
                <span class="p">[</span><span class="mf">4.0</span><span class="p">],</span> 
                <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]]</span> <span class="c"># seconds </span>
<span class="n">dx</span>           <span class="o">=</span> <span class="mf">0.03</span>                   <span class="c"># translation axis X (meters) </span>
<span class="n">dy</span>           <span class="o">=</span> <span class="mf">0.04</span>                   <span class="c"># translation axis Y (meters) </span>
<span class="n">pathList</span>     <span class="o">=</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]],</span> 
                <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]],</span>
                <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="c"># point 1</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">+</span><span class="n">dy</span><span class="p">,</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
                 <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">dx</span><span class="p">,</span> <span class="c"># point 2</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
                 <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="c"># point 3</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">,</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
                 <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="c"># point 4 </span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span>
                  <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]</span>
               <span class="p">]</span> 
<span class="n">proxy</span><span class="o">.</span><span class="n">transformInterpolations</span><span class="p">(</span><span class="n">effectorList</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">pathList</span><span class="p">,</span> 
                                 <span class="n">axisMaskList</span><span class="p">,</span> <span class="n">timeList</span><span class="p">,</span> <span class="n">isAbsolute</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::setTransform__ssCR.iCR.std::vector:float:CR.floatCR.iCR">
<a class="reference internal" href="../stdtypes.html#void" title="void">void</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">setTransform</tt><big>(</big><a class="reference internal" href="../stdtypes.html#ss" title="std::string">const std::string&amp;</a> <em>chainName</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>space</em>, <a class="reference internal" href="../stdtypes.html#std::vector:float:" title="std::vector&lt;float&gt;">const std::vector&lt;float&gt;&amp;</a> <em>transform</em>, <a class="reference internal" href="../stdtypes.html#float" title="float">const float&amp;</a> <em>fractionMaxSpeed</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>axisMask</em><big>)</big><a class="headerlink" href="#ALMotionProxy::setTransform__ssCR.iCR.std::vector:float:CR.floatCR.iCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves an end-effector to the given position and orientation transform. This is a non-blocking call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chainName</strong> &#8211; Name of the chain. Could be: &#8220;Head&#8221;, &#8220;LArm&#8221;,&#8221;RArm&#8221;, &#8220;LLeg&#8221;, &#8220;RLeg&#8221;, &#8220;Torso&#8221;</li>
<li><strong>space</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>transform</strong> &#8211; Transform arrays</li>
<li><strong>fractionMaxSpeed</strong> &#8211; The fraction of maximum speed to use</li>
<li><strong>axisMask</strong> &#8211; Axis mask. True for axes that you wish to control. e.g. 7 for position only, 56 for rotation only and 63 for both</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_settransform.cpp"><tt class="xref download docutils literal"><span class="pre">almotion_settransform.cpp</span></tt></a></p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;alproxies/almotionproxy.h&gt;</span>
<span class="cp">#include &lt;qi/os.hpp&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Usage: motion_settransform pIp&quot;</span>
              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">pIp</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="n">AL</span><span class="o">::</span><span class="n">ALMotionProxy</span> <span class="n">motion</span><span class="p">(</span><span class="n">pIp</span><span class="p">);</span>

  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">stiffnesses</span> <span class="o">=</span> <span class="n">motion</span><span class="p">.</span><span class="n">getStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">stiffnesses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.5f</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Warning: this example will have no effect. &quot;</span>
              <span class="o">&lt;&lt;</span> <span class="s">&quot;Robot must be stiff and standing.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Example showing how to set Torso Transform, using a fraction of max speed</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">chainName</span>  <span class="o">=</span> <span class="s">&quot;Torso&quot;</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">space</span>              <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">transform</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="c1">// Absolute Position</span>
  <span class="n">transform</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>  <span class="c1">// 1.0f, 0.0f, 0.0f, 0.00f</span>
  <span class="n">transform</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>  <span class="c1">// 0.0f, 1.0f, 0.0f, 0.00f</span>
  <span class="n">transform</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>  <span class="c1">// 0.0f, 0.0f, 1.0f, 0.25f</span>
  <span class="n">transform</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.25f</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">fractionMaxSpeed</span> <span class="o">=</span> <span class="mf">0.2f</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">axisMask</span>           <span class="o">=</span> <span class="mi">63</span><span class="p">;</span>
  <span class="n">motion</span><span class="p">.</span><span class="n">setTransform</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">);</span>
  <span class="n">qi</span><span class="o">::</span><span class="n">os</span><span class="o">::</span><span class="n">sleep</span><span class="p">(</span><span class="mf">3.0f</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" href="../../_downloads/almotion_settransform.py"><tt class="xref download docutils literal"><span class="pre">almotion_settransform.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_settransform.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">walkInit</span><span class="p">()</span>

<span class="c"># Example showing how to set Torso Transform, using a fraction of max speed</span>
<span class="n">chainName</span>        <span class="o">=</span> <span class="s">&quot;Torso&quot;</span> 
<span class="n">space</span>            <span class="o">=</span> <span class="mi">2</span> 
<span class="n">transform</span>        <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">,</span> 
                    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">,</span> 
                    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span> <span class="c"># Absolute Position</span>
<span class="n">fractionMaxSpeed</span> <span class="o">=</span> <span class="mf">0.2</span> 
<span class="n">axisMask</span>         <span class="o">=</span> <span class="mi">63</span> 
<span class="n">proxy</span><span class="o">.</span><span class="n">setTransform</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::changeTransform__ssCR.iCR.std::vector:float:CR.floatCR.iCR">
<a class="reference internal" href="../stdtypes.html#void" title="void">void</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">changeTransform</tt><big>(</big><a class="reference internal" href="../stdtypes.html#ss" title="std::string">const std::string&amp;</a> <em>chainName</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>space</em>, <a class="reference internal" href="../stdtypes.html#std::vector:float:" title="std::vector&lt;float&gt;">const std::vector&lt;float&gt;&amp;</a> <em>transform</em>, <a class="reference internal" href="../stdtypes.html#float" title="float">const float&amp;</a> <em>fractionMaxSpeed</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>axisMask</em><big>)</big><a class="headerlink" href="#ALMotionProxy::changeTransform__ssCR.iCR.std::vector:float:CR.floatCR.iCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves an end-effector to the given position and orientation transform. This is a non-blocking call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chainName</strong> &#8211; Name of the chain. Could be: &#8220;Head&#8221;, &#8220;LArm&#8221;,&#8221;RArm&#8221;, &#8220;LLeg&#8221;, &#8220;RLeg&#8221;, &#8220;Torso&#8221;</li>
<li><strong>space</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>transform</strong> &#8211; Transform arrays</li>
<li><strong>fractionMaxSpeed</strong> &#8211; The fraction of maximum speed to use</li>
<li><strong>axisMask</strong> &#8211; Axis mask. True for axes that you wish to control. e.g. 7 for position only, 56 for rotation only and 63 for both</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_changetransform.cpp"><tt class="xref download docutils literal"><span class="pre">almotion_changetransform.cpp</span></tt></a></p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;alproxies/almotionproxy.h&gt;</span>
<span class="cp">#include &lt;qi/os.hpp&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Usage: motion_changetransform pIp&quot;</span>
              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">pIp</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="n">AL</span><span class="o">::</span><span class="n">ALMotionProxy</span> <span class="n">motion</span><span class="p">(</span><span class="n">pIp</span><span class="p">);</span>

  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">stiffness</span> <span class="o">=</span> <span class="n">motion</span><span class="p">.</span><span class="n">getStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">stiffness</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.5f</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Warning: following example will have no effect. &quot;</span>
              <span class="o">&lt;&lt;</span> <span class="s">&quot;Robot must be stiff and standing.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Example showing how to set Torso Transform, using a fraction of max speed</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">chainName</span>  <span class="o">=</span> <span class="s">&quot;Torso&quot;</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">space</span>     <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// SPACE_NAO</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">transform</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
  <span class="n">transform</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>  <span class="c1">// 1.0f, 0.0f, 0.0f, 0.05f</span>
  <span class="n">transform</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">0.05f</span><span class="p">;</span> <span class="c1">// 0.0f, 1.0f, 0.0f, 0.0f</span>
  <span class="n">transform</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>  <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>  <span class="c1">// 0.0f, 0.0f, 1.0f, 0.0f</span>
  <span class="n">transform</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">fractionMaxSpeed</span> <span class="o">=</span> <span class="mf">0.2f</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">axisMask</span>  <span class="o">=</span> <span class="mi">63</span><span class="p">;</span>
  <span class="n">motion</span><span class="p">.</span><span class="n">changeTransform</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">);</span>

  <span class="n">qi</span><span class="o">::</span><span class="n">os</span><span class="o">::</span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.0f</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" href="../../_downloads/almotion_changetransform.py"><tt class="xref download docutils literal"><span class="pre">almotion_changetransform.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_changetransform.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">proxy</span><span class="o">.</span><span class="n">setStiffnesses</span><span class="p">(</span><span class="s">&quot;Body&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">walkInit</span><span class="p">()</span>

<span class="c"># Example showing how to set Torso Transform, using a fraction of max speed</span>
<span class="n">chainName</span>        <span class="o">=</span> <span class="s">&quot;Torso&quot;</span> 
<span class="n">space</span>            <span class="o">=</span> <span class="mi">2</span> <span class="c"># SPACE_NAO </span>
<span class="n">transform</span>        <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> 
                    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">,</span> 
                    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">]</span> <span class="c"># Absolute Position</span>
<span class="n">fractionMaxSpeed</span> <span class="o">=</span> <span class="mf">0.2</span> 
<span class="n">axisMask</span>         <span class="o">=</span> <span class="mi">63</span> 
<span class="n">proxy</span><span class="o">.</span><span class="n">changeTransform</span><span class="p">(</span><span class="n">chainName</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">fractionMaxSpeed</span><span class="p">,</span> <span class="n">axisMask</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ALMotionProxy::getTransform__ssCR.iCR.bCR">
<a class="reference internal" href="../stdtypes.html#std::vector:float:" title="std::vector&lt;float&gt;">std::vector&lt;float&gt;</a> <tt class="descclassname">ALMotionProxy::</tt><tt class="descname">getTransform</tt><big>(</big><a class="reference internal" href="../stdtypes.html#ss" title="std::string">const std::string&amp;</a> <em>name</em>, <a class="reference internal" href="../stdtypes.html#i" title="int">const int&amp;</a> <em>space</em>, <a class="reference internal" href="../stdtypes.html#b" title="bool">const bool&amp;</a> <em>useSensorValues</em><big>)</big><a class="headerlink" href="#ALMotionProxy::getTransform__ssCR.iCR.bCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets an Homogenous Transform relative to the TASK_SPACE. Axis definition: the x axis is positive toward NAO&#8217;s front, the y from right to left and the z is vertical.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; Name of the item. Could be: any joint or chain or sensor (Head, LArm, RArm, LLeg, RLeg, Torso, HeadYaw, ..., CameraTop, CameraBottom, MicroFront, MicroRear, MicroLeft, MicroRight, Accelerometer, Gyrometer, Laser, LFsrFR, LFsrFL, LFsrRR, LFsrRL, RFsrFR, RFsrFL, RFsrRR, RFsrRL, USSensor1, USSensor2, USSensor3, USSensor4. Use getSensorNames for the list of sensors supported on your robot.</li>
<li><strong>space</strong> &#8211; Task space {SPACE_TORSO = 0, SPACE_WORLD = 1, SPACE_NAO = 2}.</li>
<li><strong>useSensorValues</strong> &#8211; If true, the sensor values will be used to determine the position.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Vector of 16 floats corresponding to the values of the matrix, line by line.</p>
</td>
</tr>
</tbody>
</table>
<p><a class="reference download internal" href="../../_downloads/almotion_gettransform.cpp"><tt class="xref download docutils literal"><span class="pre">almotion_gettransform.cpp</span></tt></a></p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;alproxies/almotionproxy.h&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Usage: motion_gettransform pIp&quot;</span>
              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">pIp</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="n">AL</span><span class="o">::</span><span class="n">ALMotionProxy</span> <span class="n">motion</span><span class="p">(</span><span class="n">pIp</span><span class="p">);</span>

  <span class="c1">// Example showing how to get the end of the right arm as a transform</span>
  <span class="c1">// represented in torso space.</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;RArm&quot;</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">space</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// TORSO_SPACE</span>
  <span class="kt">bool</span> <span class="n">useSensorValues</span>  <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">motion</span><span class="p">.</span><span class="n">getTransform</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">useSensorValues</span><span class="p">);</span>
  <span class="c1">// R R R x</span>
  <span class="c1">// R R R y</span>
  <span class="c1">// R R R z</span>
  <span class="c1">// 0 0 0 1</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Transform of RArm&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference download internal" href="../../_downloads/almotion_gettransform.py"><tt class="xref download docutils literal"><span class="pre">almotion_gettransform.py</span></tt></a></p>
<div class="highlight-py"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">naoqi</span> <span class="kn">import</span> <span class="n">ALProxy</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Usage: &#39;python motion_gettransform.py IP [PORT]&#39;&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">IP</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">9559</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">PORT</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALMotion&quot;</span><span class="p">,</span> <span class="n">IP</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Could not create proxy to ALMotion&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Error was: &quot;</span><span class="p">,</span><span class="n">e</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># Example showing how to get the end of the right arm as a transform </span>
<span class="c"># represented in torso space. The result is a 4 by 4 matrix composed </span>
<span class="c"># of a 3*3 rotation matrix and a column vector of positions. </span>
<span class="n">name</span>  <span class="o">=</span> <span class="s">&#39;RArm&#39;</span> 
<span class="n">space</span>  <span class="o">=</span> <span class="mi">0</span> 
<span class="n">useSensorValues</span>  <span class="o">=</span> <span class="bp">True</span> 
<span class="n">result</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">getTransform</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">useSensorValues</span><span class="p">)</span> 
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span> 
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span> 
    <span class="k">print</span> <span class="n">result</span><span class="p">[</span><span class="mi">4</span><span class="o">*</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">],</span> 
  <span class="k">print</span> <span class="s">&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
          <div class="footernav">
    &laquo; <a href="control-cartesian.html" title="Cartesian control">Cartesian control</a>
     |
    <a href="control-cartesian.html" title="Cartesian control" accesskey="U">Cartesian control</a>
   |
    <a href="control-cartesian-tuto.html" title="Cartesian control Tutorial: The Hula-Hoop motion">Cartesian control Tutorial: The Hula-Hoop motion</a> &raquo;</div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <ul class="this-page-menu">
      <li><a href="../../_sources/naoqi/motion/control-cartesian-api.txt"
             rel="nofollow">Show Source</a></li>
    </ul>


  <h3>Table Of Contents</h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../contents.html">Site map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nao/index.html">NAO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software/index.html">Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/index.html">Programming Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../ref/index.html">References</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">NAOqi API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../core/index.html">NAOqi Core</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">NAOqi Motion</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="almotion-api.html">ALMotion API</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced.html">Motion - advanced</a></li>
<li class="toctree-l4"><a class="reference internal" href="control-stiffness.html">Stiffness control</a></li>
<li class="toctree-l4"><a class="reference internal" href="control-joint.html">Joint control</a></li>
<li class="toctree-l4"><a class="reference internal" href="control-walk.html">Walk control</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="control-cartesian.html">Cartesian control</a><ul class="current">
<li class="toctree-l5 current"><a class="current reference internal" href="">Cartesian control API</a><ul class="simple">
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="control-cartesian-tuto.html">Cartesian control Tutorial: The Hula-Hoop motion</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="control-wholebody.html">Whole Body control</a></li>
<li class="toctree-l4"><a class="reference internal" href="reflexes-collision-avoidance.html">Self-collision avoidance</a></li>
<li class="toctree-l4"><a class="reference internal" href="reflexes-fall-manager.html">Fall manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="reflexes-smart-stiffness.html">Smart Stiffness</a></li>
<li class="toctree-l4"><a class="reference internal" href="tools-general.html">General tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="tools-motion-task.html">Motion task</a></li>
<li class="toctree-l4"><a class="reference internal" href="almotionrecorder.html">ALMotionRecorder</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../audio/index.html">NAOqi Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vision/index.html">NAOqi Vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sensors/index.html">NAOqi Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trackers/index.html">NAOqi Trackers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sensors/dcm.html">DCM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stdtypes.html">Standard types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cpp-classindex.html">&gt; All C++ Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cpp-funcindex.html">&gt; All C++ Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../naoqi-eventindex.html">&gt; All NAOqi Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../naoqi-memoryindex.html">&gt; All NAOqi Memory Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ref/cpp-api.html">C++ API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ref/python-api.html">Python API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../legal/notice.html">Legal notices</a></li>
</ul>

    <h3><a href="../../index.html">On this page</a></h3>
    <ul>
<li><a class="reference internal" href="#">Cartesian control API</a><ul>
<li><a class="reference internal" href="#method-list">Method list</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="control-cartesian.html" title="Cartesian control">previous</a>
     |
    <a href="control-cartesian.html" title="Cartesian control" accesskey="U">up</a>
   |
    <a href="control-cartesian-tuto.html" title="Cartesian control Tutorial: The Hula-Hoop motion">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>