.. _alaudiosourcelocalization-api:

ALAudioSourceLocalization API
=============================

:ref:`naoqi-audio` || :ref:`Overview <alaudiosourcelocalization>` | API

-----------------

.. seealso::

   - :ref:`Microphones Hardware <hardware-audio-in>`


Namespace : **AL**

.. code-block:: cpp

  #include <alproxies/alaudiosourcelocalizationproxy.h>

Method list
-----------

As any module, this module inherits methods from :ref:`almodule-api`.
It also has the following specific methods:

.. cpp:class:: ALAudioSourceLocalizationProxy

* :cpp:func:`ALAudioSourceLocalizationProxy::setParameter`
* :cpp:func:`ALAudioSourceLocalizationProxy::subscribe`
* :cpp:func:`ALAudioSourceLocalizationProxy::unsubscribe`


Event list
----------

* :naoqi:event:`SoundLocated`

Methods
-------

.. cpp:function:: void ALAudioSourceLocalizationProxy::setParameter(const std::string& parameter, const AL::ALValue& value)

  Set the following parameters:

  - "EnergyComputation" to True or False (default).
    When set to True, the peak energy of the located sound is estimated.
    The *ALMemory* key *"ALAudioSourceLocalization/SoundLocated"* where the result of the computation is updated is modified consequently:


  .. code-block:: guess

     [ [time(sec), time(usec)],

       [azimuth(rad), elevation(rad), confidence, energy],

       [Head Position[6D]]
     ]

  - "Sensibility" between 0 and 1 to adjust the capacity of NAO to locate quiet sounds.

  :param parameter: Name of the parameter
  :param value: Value of the parameter



.. cpp:function:: void ALAudioSourceLocalizationProxy::subscribe(const std::string& name)

  Subscribes to *ALAudioSourceLocalization*.
  This causes the module to start writing information to *ALMemory* in *"ALAudioSourceLocalization/SoundLocated"*.
  This can be accessed in *ALMemory* using :cpp:func:`ALMemoryProxy::getData`.

  :param name: Name to identify the subscriber



.. cpp:function:: void ALAudioSourceLocalizationProxy::unsubscribe(const std::string& name)

  Unsubscribes to *ALAudioSourceLocalization*.
  This causes the module to stop writing information to *ALMemory* in *"ALAudioSourceLocalization/SoundLocated"*.

  :param name: Name to identify the subscriber (as used in :cpp:func:`ALAudioSourceLocalizationProxy::subscribe`).


Events
------

.. naoqi:event:: SoundLocated(AL::ALValue value)

  Raised when a sound source has been localized.

  :param value: Located source informations. Please refer to :ref:`alaudiosourcelocalization` for details.

  .. note:: This event should be prefixed by "ALAudioSourceLocalization/" when subscribing to it.
