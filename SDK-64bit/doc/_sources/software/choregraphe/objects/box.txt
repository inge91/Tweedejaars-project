.. |parameter-button| image:: /medias/desktop/choregraphe/parameter_button.png
   :class: img-inline

.. _choregraphe-reference-box:

Box
====

What is a box
-------------

.. image:: /medias/desktop/choregraphe/box.png
   :width: 111 px
   :height: 92 px

A box is a fundamental object in Choregraphe as everything you manipulate with this software rests on boxes.

A box can be a **simple elementary action** (Say box for example) as well as a **very complex application** (room exploration for example).
However it is the **basic element** to create :ref:`behaviors <choregraphe-reference-behavior>`.

.. note::
   You can have a **description** and some tips about a box in the lower part of the box library panel when you select the box in the :ref:`choregraphe-overview-box-libary-panel` or in a tooltip displayed by passing above the box in the :ref:`choregraphe-overview-flow-diagram-panel`.

Inputs/outputs
++++++++++++++++

In order to **communicate** with other boxes and to be **started** or **stopped**, a box has:

* :ref:`inputs <choregraphe-reference-box-input>` (on the left side) and 
* :ref:`outputs <choregraphe-reference-box-output>` (on the right).

The inputs and outputs of boxes are connected through **links** on an event based communication logic.

3 types of boxes
++++++++++++++++

There are three different **types of box**:

* :ref:`choregraphe-reference-box-type-script` which includes a :ref:`script <choregraphe-reference-box-script>`.
* :ref:`choregraphe-reference-box-type-flow-diagram` which includes a
  :ref:`script <choregraphe-reference-box-script>` and a :ref:`flow diagram <choregraphe-reference-box-flow-diagram>`.
* :ref:`choregraphe-reference-box-type-timeline` which includes a
  :ref:`script <choregraphe-reference-box-script>` and a :ref:`Timeline <choregraphe-reference-box-timeline>`.

Optional components
++++++++++++++++++++

.. list-table::
   :widths: 15 100
   :header-rows: 1

   * - Component
     - Usage
   * - :ref:`Parameters <choregraphe-reference-box-parameter>`
     - If you want to change or create some settings about the action made by a box,
       it may be useful to have a look at its parameters using the |parameter-button| **parameter** button.
	   
       For example, the ``Say`` box has a voice shape parameter which changes
       the voice used by NAO to say the text.
   * - :ref:`Attached file <choregraphe-reference-attached-files>`
     - A box may need some additional files (a music for a dance for example),
       in order to package the box with its needed files, you can 
       attach them to the box.
   * - :ref:`Resources <choregraphe-reference-box-resource>`
     - A box may also need to ensure the availability of resources and manage
       conflicts with other boxes which could use the same resources.

       For example a box to walk and a box to dance both use NAO's legs.
   * - :ref:`Plugin <choregraphe-reference-box-plugin>`
     - A box can have a plugin which basically enables you to make
       actions directly on the frontage of the box.


.. _choregraphe-create-box:

How to create a box
--------------------

To create a box:

=====  ==========================================================================
Step    Action                                              
=====  ==========================================================================
1.      Right click on your diagram wherever you want to create the box.

2.      Click on **Add a new Box** in the context menu.

        The **Create a new box** menu is displayed.

        .. image:: /medias/desktop/choregraphe/chore_create_new_box.jpg
           :width: 317 px
           :height: 600 px

3.      Define a **Name** and a **Tooltip** for your box.
       
4.      **Optional**: set the picture to recognize it among other boxes in your
        diagram.
       
5.      **Optional**: set parameters, inputs and outputs that can be manipulated
        by the box.
       
        For further details about parameters, see :ref:`How to add/remove inputs,
        outputs, parameters in a box
        <choregraphe-howto-add-remove-box-in-out-param>` section.
       
6.      Select a **Type**.
       
7.      Click on **Ok**.
       
        The created box is displayed on the diagram.
=====  ==========================================================================

.. _choregraphe-detailed-interface-box-edition:

Box Edition widget
-------------------

When you **edit** or **create** a :ref:`box <choregraphe-reference-box>`, the following widget is displayed:

.. image:: /medias/desktop/choregraphe/chore_edit_box.png
   :width: 310 px
   :height: 600 px
   
General description
++++++++++++++++++++

Here you can specify:

* the **name** of your box.
* the brief **description** of what it does in the field **Tooltip**.

  This description appears:

  *  in the **lower part of the box library panel** when you select the box in the box library or
  *  in a tooltip displayed by **passing above the box** in the flow diagram.
   
Image
++++++++

Here you can specify:

* an **image** by clicking on **Edit** and selecting one or several image(s) for your box.

  The image is displayed on the front of your box in the flow diagram.

  .. note::
     You can choose several images to have a complete graphical description of what it does.
     But you should know that only the first image is displayed beside the box name in a box library.

   
Inputs/Outputs/Parameters
+++++++++++++++++++++++++++

Here you can **add**, **edit** or **remove** :ref:`inputs <choregraphe-reference-box-input>`,
:ref:`outputs <choregraphe-reference-box-output>` and :ref:`parameters <choregraphe-reference-box-parameter>` to the box:

.. list-table::
   :widths: 5 100
   :header-rows: 1

   * - The button ...
     - Allows you to ...
   * - .. image:: /medias/desktop/choregraphe/del.png
     - **Remove** the selected input, output or parameter.
   * - .. image:: /medias/desktop/choregraphe/edit.png
     - **Edit** the selected input, output or parameter through the :ref:`input, output or parameter edition widget <choregraphe-detailed-interface-ioparam-edition-widget>`.
   * - .. image:: /medias/desktop/choregraphe/add.png
     - **Add** a new input, output or parameter through the :ref:`input, output or parameter edition widget <choregraphe-detailed-interface-ioparam-edition-widget>`.

   
Type
+++++++

Here you can specify the **type** of your box:
:ref:`Script <choregraphe-reference-box-type-script>`, :ref:`Timeline <choregraphe-reference-box-type-timeline>` or :ref:`Flow diagram <choregraphe-reference-box-type-flow-diagram>`.

   
Advanced/plugin
++++++++++++++++

On the top right of the widget, a tab named **Advanced** enables you to access to **advanced options** of the box.
You can there choose a :ref:`plugin <choregraphe-reference-box-plugin>` for your box.

