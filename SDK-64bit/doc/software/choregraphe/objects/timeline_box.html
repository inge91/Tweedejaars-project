
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Timeline box &mdash; NAO Software 1.12.3 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.12.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="NAO Software 1.12.3 documentation" href="../../../index.html" />
    <link rel="up" title="Mastering the main objects" href="../main_objects.html" />
    <link rel="next" title="Advanced panels" href="../advanced_panels.html" />
    <link rel="prev" title="Flow diagram box" href="flow_diagram_box.html" />

 

<script  type="text/javascript">
   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-19487749-1']);
   _gaq.push(['_trackPageview']);
   (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();
</script>


  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t3">
    <div id="hd">
      <h1><a href="../../../index.html">NAO Software 1.12.3 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../index.html">Home</a>
        
         |
        <a title="Site map" href="../../../contents.html">Site map</a>
        
         |
        <a title="Search" href="../../../search.html">Search</a>
         |
        <a title="Index" href="../../../genindex.html">Index</a>
        
        
      </div>
      <div class="nav">
    &laquo; <a href="flow_diagram_box.html" title="Flow diagram box">previous</a>
     |
    <a href="../main_objects.html" title="Mastering the main objects" accesskey="U">up</a>
   |
    <a href="../advanced_panels.html" title="Advanced panels">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="software-choregraphe-objects-timeline_box">
            
  <div class="section" id="timeline-box">
<span id="choregraphe-reference-box-type-timeline"></span><h1>Timeline box<a class="headerlink" href="#timeline-box" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-a-timeline-box">
<h2>What is a Timeline box<a class="headerlink" href="#what-is-a-timeline-box" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/chore_ref_timeline_box.png" src="../../../_images/chore_ref_timeline_box.png" style="width: 600px; height: 450px;" />
<p>A <strong>Timeline</strong> box is a <a class="reference internal" href="box.html#choregraphe-reference-box"><em>Box</em></a> which includes
a <a class="reference internal" href="#choregraphe-reference-box-timeline"><em>Timeline</em></a> and a <a class="reference internal" href="script_box.html#choregraphe-reference-box-script"><em>Script</em></a>.</p>
</div>
<div class="section" id="how-to-create-a-timeline-box">
<span id="choregraphe-howto-create-timeline-box"></span><h2>How to create a Timeline box<a class="headerlink" href="#how-to-create-a-timeline-box" title="Permalink to this headline">¶</a></h2>
<p>To create a <strong>Timeline</strong> box, you can:</p>
<ul class="simple">
<li>Drag and drop the <strong>Templates</strong> &gt; <strong>Animation</strong> box from the default box library, or</li>
<li>Create it from scratch:</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="95%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Step</th>
<th class="head">Action</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><ol class="first last arabic simple">
<li></li>
</ol>
</td>
<td><p class="first">Right-click on the <strong>Flow diagram</strong> wherever you want to create the box
and choose <strong>Add a new Box</strong>.</p>
<p>The <strong>Create a new box</strong> menu is displayed.</p>
<img alt="../../../_images/chore_create_new_box.jpg" class="last" src="../../../_images/chore_create_new_box.jpg" style="width: 317px; height: 600px;" />
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="2">
<li></li>
</ol>
</td>
<td>Add a <strong>Name</strong> and a <strong>Tooltip</strong> for your box.</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="3">
<li></li>
</ol>
</td>
<td><strong>Optional</strong>: set the picture to recognize it among other boxes in your diagram.</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="4">
<li></li>
</ol>
</td>
<td><p class="first"><strong>Optional</strong>: set parameters, inputs and outputs that can be manipulated by the box.</p>
<p class="last">For further details about parameters, see <a class="reference internal" href="box_optional_components.html#choregraphe-howto-add-remove-box-in-out-param"><em>How to add/remove inputs, outputs,
parameters in a box</em></a> section.</p>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="5">
<li></li>
</ol>
</td>
<td>In the box type part, select <strong>Timeline</strong>.</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="6">
<li></li>
</ol>
</td>
<td><p class="first">Click the <strong>Ok</strong> button.</p>
<p class="last">The created <strong>Timeline</strong> box is displayed on the Flow diagram.</p>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="7">
<li></li>
</ol>
</td>
<td><p class="first">Double click on your box, to get into and edit the inner <strong>Timelime</strong>.</p>
<img alt="../../../_images/timeline_view.png" class="last" src="../../../_images/timeline_view.png" style="width: 562px; height: 223px;" />
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="timeline-panel">
<span id="choregraphe-interface-timeline-panel"></span><h2>Timeline panel<a class="headerlink" href="#timeline-panel" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">The <strong>Timeline</strong> panel is displayed when you double-click on a <a class="reference internal" href="#choregraphe-reference-box-type-timeline"><em>Timeline box</em></a>.</div>
<div class="line">It enables you to <strong>edit</strong> the <a class="reference internal" href="#choregraphe-reference-box-timeline"><em>Timeline</em></a> of the box.</div>
</div>
<img alt="../../../_images/chore_timeline_panel.png" src="../../../_images/chore_timeline_panel.png" style="width: 549px; height: 250px;" />
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="13%" />
<col width="51%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Part</th>
<th class="head">Name</th>
<th class="head">Description</th>
<th class="head">For further details, see ...</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>A</strong></td>
<td><strong>Motion</strong></td>
<td><p class="first">Allows you to define <strong>Motion Keyframes</strong> to be executed following
the <strong>Timeline</strong>.</p>
<p><img alt="timeline-editor-button" class="img-inline" src="../../../_images/timeline_open_editor.png" /> <strong>Edit</strong> button displays the
<a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor"><em>Timeline Editor</em></a>.</p>
<p class="last"><img alt="timeline-play-button" class="img-inline" src="../../../_images/timeline_play.png" /> <strong>Play motion</strong> button plays the
<a class="reference internal" href="#choregraphe-reference-box-motion-layer"><em>Motion layer</em></a> of the <strong>Timeline</strong>.</p>
</td>
<td><a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor"><em>Timeline Editor</em></a></td>
</tr>
<tr class="row-odd"><td><strong>B</strong></td>
<td><strong>Time ruler</strong></td>
<td><p class="first">Represents the time elapsing when the box is started.</p>
<p><a class="reference internal" href="#timeline-panel-motion-layer-area"><em>Frame ruler</em></a>: the upper white part of the
<strong>Timeline</strong> displays the Frame numbers.
It allows you to set the <strong>Start</strong> and <strong>End</strong> frames.</p>
<p class="last"><a class="reference internal" href="#choregraphe-reference-box-motion-layer"><em>Motion layer</em></a>: the grey part of the <strong>Timeline</strong>
displays the <strong>Motion Keyframes</strong>.
It allows you to create and edit <strong>Motion Keyframes</strong>.</p>
</td>
<td><div class="first last line-block">
<div class="line"><br /></div>
<div class="line-block">
<div class="line"><a class="reference internal" href="#timeline-panel-motion-layer-area"><em>Frame ruler</em></a></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="line"><a class="reference internal" href="#choregraphe-reference-box-motion-layer"><em>Motion layer</em></a></div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-even"><td><strong>C</strong></td>
<td><strong>Behavior layers</strong></td>
<td><p class="first">Allows you to define <strong>Behavior layers</strong> to be executed in parallel with
<strong>Motion Keyframes</strong>.</p>
<p class="last"><img alt="timeline-add-button" class="img-inline" src="../../../_images/timeline_add_layers.png" /> <strong>Add</strong> button allows you to add one or more
<strong>Behavior layers</strong>.</p>
</td>
<td><a class="reference internal" href="#timeline-panel-behavior-layers-area"><em>Behavior layers</em></a></td>
</tr>
<tr class="row-odd"><td><strong>D</strong></td>
<td><strong>Edit</strong> button</td>
<td>Allows you to set the parameters of the <strong>Timeline</strong>.</td>
<td><a class="reference internal" href="#timeline-panel-details-area"><em>Timeline options</em></a></td>
</tr>
<tr class="row-even"><td><strong>E</strong></td>
<td><strong>Frame</strong> number</td>
<td>Displays the number of the selected Frame.</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="what-is-a-timeline">
<span id="choregraphe-reference-box-timeline"></span><h2>What is a Timeline<a class="headerlink" href="#what-is-a-timeline" title="Permalink to this headline">¶</a></h2>
<p>A <strong>Timeline</strong> enables you to easily synchronize boxes with movements, movements with each other
and/or <a class="reference internal" href="box.html#choregraphe-reference-box"><em>Boxes</em></a> with each other.</p>
<p>A <strong>Timeline</strong> is constituted by:</p>
<ul class="simple">
<li>a <a class="reference internal" href="#choregraphe-reference-box-motion-layer"><em>Motion layer</em></a> which contains movements.</li>
<li>Optionally one or several <a class="reference internal" href="#choregraphe-reference-box-behavior-layer"><em>Behavior layers</em></a>
which contain <strong>Flow diagrams</strong> NAO will execute in addition to its movements.</li>
</ul>
<div class="section" id="timeline-execution">
<h3>Timeline execution<a class="headerlink" href="#timeline-execution" title="Permalink to this headline">¶</a></h3>
<p>The whole <strong>Timeline</strong> is based on a time ruler.
The time is represented on the <strong>Timeline</strong> by numbered <a class="reference internal" href="#choregraphe-reference-box-frame"><em>Frames</em></a>.
Each <strong>Frame</strong> corresponds to a position of the robot and/or <a class="reference internal" href="../panels/flow_diagram_panel.html#choregraphe-reference-box-flow-diagram"><em>Flow diagrams</em></a> to execute.</p>
<p>When a <strong>Timeline</strong> is started, the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a>
is placed on the <a class="reference internal" href="#choregraphe-reference-box-frame-start"><em>Start frame</em></a>.
Then it is regularly incremented to the next Frame, until it gets to the
<a class="reference internal" href="#choregraphe-reference-box-frame-end"><em>End frame</em></a>.</p>
<p>The speed to move from a <strong>Frame</strong> to another is defined by the <strong>Frame rate</strong> of the Timeline.
For further details, see <a class="reference internal" href="#timeline-panel-details-area"><em>Timeline options</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The automatic process regularly moving the
<a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a> to the next
Frame can be affected (stopped, restarted, moved to another Frame) by the
<a class="reference internal" href="../panels/flow_diagram_panel.html#choregraphe-reference-box-child"><em>sub-boxes</em></a> and the <a class="reference internal" href="script_box.html#choregraphe-reference-box-script"><em>script of
the box</em></a>.
For example, the <strong>Goto And Stop</strong> boxes move the cursor to a specific frame
and pause the cursor so that it will not move to the next frame.</p>
</div>
</div>
</div>
<div class="section" id="frame-ruler">
<span id="choregraphe-interface-timeline-panel-motion-layer-area"></span><span id="timeline-panel-motion-layer-area"></span><h2>Frame ruler<a class="headerlink" href="#frame-ruler" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">The upper white part of the Time ruler displays the Frame numbers.</div>
<div class="line">It allows you to set the <strong>Start</strong> and <strong>End</strong> frames.</div>
</div>
<img alt="../../../_images/motion_layer_timeline.png" src="../../../_images/motion_layer_timeline.png" style="width: 371px; height: 189px;" />
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="43%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Part</th>
<th class="head">Name</th>
<th class="head">Represented by ...</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>A</strong></td>
<td><a class="reference internal" href="#choregraphe-reference-box-frame"><em>Frames</em></a></td>
<td>scale of numbers.</td>
</tr>
<tr class="row-odd"><td><strong>B</strong></td>
<td><a class="reference internal" href="#choregraphe-reference-box-frame-start"><em>Start frame</em></a></td>
<td>a green flag.</td>
</tr>
<tr class="row-even"><td><strong>C</strong></td>
<td><a class="reference internal" href="#choregraphe-reference-box-frame-end"><em>End frame</em></a></td>
<td>a red flag.</td>
</tr>
<tr class="row-odd"><td><strong>D</strong></td>
<td><a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a></td>
<td>a red line, appearing only when the Timeline is executed.</td>
</tr>
</tbody>
</table>
<div class="section" id="frames">
<span id="choregraphe-reference-box-frame"></span><h3>Frames<a class="headerlink" href="#frames" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">The <strong>Frame</strong> is the unit of a <a class="reference internal" href="#choregraphe-reference-box-timeline"><em>Timeline</em></a>.</div>
<div class="line">Each Frame has a <strong>number of frame</strong> which corresponds to its position in the Timeline.</div>
<div class="line"><br /></div>
</div>
<p>When the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a> gets to a Frame, simultaneously:</p>
<ul class="simple">
<li>the joint values stored to this Frame are applied to the robot.</li>
<li>the <a class="reference internal" href="../panels/flow_diagram_panel.html#choregraphe-reference-box-flow-diagram"><em>Flow diagram</em></a> of each
<a class="reference internal" href="#choregraphe-reference-box-behavior-keyframe"><em>Behavior keyframe</em></a> placed on
this Frame are <a class="reference internal" href="../reference.html#choregraphe-reference-loading-unloading"><em>loaded</em></a> (if they have not been loaded yet).</li>
</ul>
<div class="section" id="start-frame">
<span id="choregraphe-reference-box-frame-start"></span><h4>Start frame<a class="headerlink" href="#start-frame" title="Permalink to this headline">¶</a></h4>
<p>The <strong>Start frame</strong> is a specific <a class="reference internal" href="#choregraphe-reference-box-frame"><em>Frames</em></a>.</p>
<p>When the Timeline is started, the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a>
is directly placed at this Frame.</p>
<p>Any Frame which is before the <strong>Start frame</strong> will not be reached.</p>
<p>If you force the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a> to move
on one of those Frames (with a <strong>Goto And Play</strong> box for example),
this will have the same result as going to the <a class="reference internal" href="#choregraphe-reference-box-frame-end"><em>End frame</em></a>.</p>
</div>
<div class="section" id="end-frame">
<span id="choregraphe-reference-box-frame-end"></span><h4>End frame<a class="headerlink" href="#end-frame" title="Permalink to this headline">¶</a></h4>
<p>The <strong>End frame</strong> is a specific <a class="reference internal" href="#choregraphe-reference-box-frame"><em>Frames</em></a>.</p>
<p>As soon as the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a> gets to this Frame:</p>
<ol class="arabic simple">
<li>The <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a> is paused.
So it stops being incremented.</li>
<li>If there is any <strong>onStopped</strong> <a class="reference internal" href="box_input_output.html#choregraphe-reference-box-output"><em>output</em></a>:<ul>
<li>The Timeline is <a class="reference internal" href="../reference.html#choregraphe-reference-loading-unloading"><em>unloaded</em></a>.</li>
<li>The first <strong>onStopped</strong> <a class="reference internal" href="box_input_output.html#choregraphe-reference-box-output"><em>output</em></a> of the box is stimulated.</li>
</ul>
</li>
</ol>
<p>Any Frame which is after the <strong>End frame</strong> will not be reached.</p>
<p>If you force the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a>
to move on one of those Frames (with a <strong>Goto And Play</strong> box for example),
this will have the same result as going to the <strong>End frame</strong>.</p>
</div>
<div class="section" id="how-to-set-start-and-end-frames">
<h4>How to set Start and End frames<a class="headerlink" href="#how-to-set-start-and-end-frames" title="Permalink to this headline">¶</a></h4>
<p>By default, <strong>Start frame</strong> is set to the Frame <strong>0</strong> and <strong>End frame</strong> is set just
before the last <strong>Motion frame</strong> defined.</p>
<p>To move <strong>Start frame</strong> or <strong>End frame</strong>:</p>
<ul class="simple">
<li>Drag them on the ruler or</li>
<li>Right-click on a Frame number and choose <strong>Set start frame here</strong> or <strong>Set end frame here</strong>.</li>
</ul>
<p>To reset them to the default value:</p>
<ul class="simple">
<li>Right-click on a Frame number and choose <strong>Reset start here</strong> or <strong>Reset end here</strong>.</li>
</ul>
</div>
</div>
<div class="section" id="time-cursor">
<span id="choregraphe-reference-box-timeline-time-cursor"></span><h3>Time cursor<a class="headerlink" href="#time-cursor" title="Permalink to this headline">¶</a></h3>
<p>The <strong>Time cursor</strong> represents the currently executed Frame in the Timeline.</p>
<div class="section" id="value-of-the-time-cursor">
<h4>Value of the Time cursor<a class="headerlink" href="#value-of-the-time-cursor" title="Permalink to this headline">¶</a></h4>
<p>For a <a class="reference internal" href="#choregraphe-reference-box-type-timeline"><em>Timeline box</em></a>, the value of the <strong>Time cursor</strong>:</p>
<ul class="simple">
<li>is the number of the executed Frame, or</li>
<li>is equal to -1 when its <a class="reference internal" href="#choregraphe-reference-box-timeline"><em>Timeline</em></a> has not been started or has been stopped.</li>
</ul>
<p>For a <a class="reference internal" href="flow_diagram_box.html#choregraphe-reference-box-type-flow-diagram"><em>Flow diagram box</em></a>, its value is systematically equal to -1.</p>
<p>A <a class="reference internal" href="script_box.html#choregraphe-reference-box-type-script"><em>Script box</em></a> has no <strong>Time cursor</strong>.</p>
</div>
<div class="section" id="how-to-get-the-value-of-the-time-cursor">
<span id="choregraphe-howto-value-time-cursor"></span><h4>How to get the value of the Time cursor<a class="headerlink" href="#how-to-get-the-value-of-the-time-cursor" title="Permalink to this headline">¶</a></h4>
<p>You can access to the value of the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a>
of a Timeline box from its <a class="reference internal" href="script_box.html#choregraphe-reference-box-script"><em>Script</em></a> with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">timeCursor</span> <span class="o">=</span> <span class="n">ALMemory</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="p">)</span>
</pre></div>
</div>
<p>You can also access to it from the script of a <a class="reference internal" href="../panels/flow_diagram_panel.html#choregraphe-reference-box-child"><em>child box</em></a> with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">timeCursor</span> <span class="o">=</span> <span class="n">ALMemory</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentId</span> <span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">A <a class="reference internal" href="script_box.html#choregraphe-reference-box-type-script"><em>Script box</em></a> has no <strong>Time cursor</strong>.
So if you try to call the first command above in a script box, it will return an error.</p>
</div>
</div>
</div>
</div>
<div class="section" id="motion-layer">
<span id="choregraphe-reference-box-motion-layer"></span><h2>Motion layer<a class="headerlink" href="#motion-layer" title="Permalink to this headline">¶</a></h2>
<p>The <strong>Motion layer</strong> is where NAO&#8217;s movements are stored in the <a class="reference internal" href="#choregraphe-reference-box-timeline"><em>Timeline</em></a>.</p>
<p>Each <a class="reference internal" href="#choregraphe-reference-box-motion-keyframe"><em>Motion keyframe</em></a> on the <strong>Motion layer</strong>
corresponds to a position of the robot or a part of its body.</p>
<img alt="../../../_images/chore_ref_motion_layer.png" src="../../../_images/chore_ref_motion_layer.png" style="width: 493px; height: 213px;" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As there are several joints stored in this <strong>Motion layer</strong>, we can say it is
made with several sub-motion layers, each of them corresponding to a joint.
They are the sub-layers you can see when opening the <a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor"><em>Timeline Editor</em></a>.</p>
</div>
<div class="section" id="motion-keyframe">
<span id="choregraphe-reference-box-motion-keyframe"></span><h3>Motion keyframe<a class="headerlink" href="#motion-keyframe" title="Permalink to this headline">¶</a></h3>
<p>A <strong>Motion keyframe</strong> represents a position of the robot or a part of its body.</p>
<p>It contains the angle values of the stored joints.</p>
<p>When the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a> gets to a <strong>Motion keyframe</strong>,
the joint values stored to this frame are applied to the robot.</p>
</div>
<div class="section" id="interpolation">
<h3>Interpolation<a class="headerlink" href="#interpolation" title="Permalink to this headline">¶</a></h3>
<p>The <strong>Motion layer</strong> contains <a class="reference internal" href="#choregraphe-reference-box-motion-keyframe"><em>Motion keyframe</em></a>
representing specific positions set by the person who made the movement.</p>
<p>Then an interpolation of joint values is automatically made in order to obtain
intermediate positions between two <a class="reference internal" href="#choregraphe-reference-box-motion-keyframe"><em>Motion keyframes</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can choose the type of interpolation between the <a class="reference internal" href="#choregraphe-reference-box-motion-keyframe"><em>Motion keyframe</em></a>
in the <a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor"><em>Timeline Editor</em></a>.</p>
</div>
</div>
</div>
<div class="section" id="editing-motion-keyframes">
<h2>Editing Motion keyframes<a class="headerlink" href="#editing-motion-keyframes" title="Permalink to this headline">¶</a></h2>
<p><strong>Motion keyframes</strong> can be created and modified directly on the <a class="reference internal" href="#motion-ruler"><em>Motion ruler</em></a> or
using the <a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor"><em>Timeline Editor</em></a>.</p>
<div class="section" id="motion-ruler">
<span id="id1"></span><h3>Motion ruler<a class="headerlink" href="#motion-ruler" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">The Motion ruler gives a summarized view of the <strong>Motion</strong> layer, allowing you to create and edit animations.</div>
<div class="line">Use also the <a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor"><em>Timeline Editor</em></a> to see a detailed view of the <strong>Motion</strong> layer.</div>
<div class="line"><br /></div>
</div>
<img alt="../../../_images/motion_layer_timeline_bottom.png" src="../../../_images/motion_layer_timeline_bottom.png" style="width: 484px; height: 187px;" />
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="31%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Part</th>
<th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>A</strong></td>
<td><strong>Motion keyframe</strong></td>
<td>Each <a class="reference internal" href="#choregraphe-reference-box-motion-keyframe"><em>Motion keyframe</em></a>
is represented by a <strong>dark grey rectangle</strong>.</td>
</tr>
<tr class="row-odd"><td><strong>B</strong></td>
<td><strong>Actuator values</strong></td>
<td>If you keep the mouse on a <strong>Motion keyframe</strong>,
a tooltip appears with the values of stored joints.</td>
</tr>
<tr class="row-even"><td><strong>C</strong></td>
<td>Selected <strong>Motion keyframe</strong></td>
<td><p class="first">A <strong>Motion keyframe</strong> gets orange when it is selected.</p>
<p class="last">Drag a selection rectangle to select several <strong>Motion keyframes</strong>, or
Ctrl-Click them.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>D</strong></td>
<td>Selected <strong>range of frames</strong></td>
<td><p class="first">The <strong>range of frames</strong> is an alternative mode of selecting
<strong>Motion keyframes</strong>.</p>
<p class="last">Drag the Frame numbers to create it.</p>
</td>
</tr>
<tr class="row-even"><td><strong>E</strong></td>
<td>Insertion point</td>
<td>Represented by a blue line, the insertion point allows to create or to paste
<strong>Motion keyframes</strong>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="creating">
<h3>Creating<a class="headerlink" href="#creating" title="Permalink to this headline">¶</a></h3>
<p>To insert a new <strong>Motion keyframe</strong> with the robot&#8217;s current position:</p>
<ol class="arabic">
<li><p class="first">Right-click a frame in the grey Timeline and choose <strong>Store joints in keyframe</strong>.</p>
</li>
<li><p class="first">Choose the joints you want to store the value of (<strong>Whole body</strong>, <strong>Head</strong>, <strong>Arms</strong> or <strong>Legs</strong>).</p>
<p>A dark grey rectangle appears.</p>
</li>
</ol>
</div>
<div class="section" id="selecting">
<h3>Selecting<a class="headerlink" href="#selecting" title="Permalink to this headline">¶</a></h3>
<p>To select:</p>
<ul>
<li><p class="first">a <strong>Motion keyframe</strong>, simply click on it.</p>
<p>The robot will automatically take the <strong>position</strong> corresponding to this <strong>Motion keyframe</strong>.</p>
</li>
<li><p class="first">several <strong>Motion keyframes</strong>, drag and drop in the grey Timeline.</p>
</li>
<li><p class="first">all <strong>Motion keyframes</strong>, right-click the grey Timeline and choose <strong>Selection</strong> &gt; <strong>Select all</strong>.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The option <strong>Select from layer</strong> is only useful in the <a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor"><em>Timeline Editor</em></a>.</p>
</div>
</div>
<div class="section" id="removing">
<h3>Removing<a class="headerlink" href="#removing" title="Permalink to this headline">¶</a></h3>
<p>To remove the values of some joints from any <strong>Motion keyframe</strong>:</p>
<ol class="arabic simple">
<li>Select one or several <strong>Motion keyframe</strong>.</li>
<li>Right-click it and choose <strong>Remove joints from keyframe</strong>.</li>
<li>Choose the joints you want to remove (<strong>Whole body</strong>, <strong>Head</strong>, <strong>Arms</strong> or <strong>Legs</strong>).</li>
</ol>
</div>
<div class="section" id="moving">
<h3>Moving<a class="headerlink" href="#moving" title="Permalink to this headline">¶</a></h3>
<p>To move <strong>Motion keyframes</strong> within the Timeline:</p>
<ol class="arabic simple">
<li>Select one or several <strong>Motion keyframe</strong>.</li>
<li>Drag them.</li>
</ol>
<p>or</p>
<ol class="arabic simple">
<li>Select one or several <strong>Motion keyframe</strong>.</li>
<li>Right-click it and choose <strong>Copy</strong> or <strong>Cut</strong>.</li>
<li>Click on the Timeline in order to place the <strong>insertion point</strong> (see <a class="reference internal" href="#motion-ruler"><em>Motion ruler</em></a>).</li>
<li>Right-click it and choose <strong>Paste</strong>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <strong>Keyframe</strong> you have pasted is <strong>empty</strong>, this could mean that there
is a conflict with contradictory values for the same joint at this frame.</p>
</div>
</div>
<div class="section" id="mirroring">
<h3>Mirroring<a class="headerlink" href="#mirroring" title="Permalink to this headline">¶</a></h3>
<p>The values of left and right joints can be <strong>swapped</strong> using the <strong>Mirror</strong> option in the contextual menu.
Then you can select where to apply the swap (<strong>Whole timeline</strong>, <strong>Selected frames</strong>, <strong>Selected keys</strong>).</p>
<p>For example if the robot moves his right arm during the whole Timeline and you mirror it,
then it will move his left arm from now on instead.</p>
</div>
<div class="section" id="spreading-tightening">
<h3>Spreading / tightening<a class="headerlink" href="#spreading-tightening" title="Permalink to this headline">¶</a></h3>
<p>to change the gap between <strong>Motion keyframes</strong>:</p>
<ol class="arabic">
<li><p class="first">Select a <strong>range of frames</strong> by dragging the <strong>Frame numbers</strong>.</p>
<p>The selected <strong>range of frames</strong> is represented by a blue square surrounded by purple triangles.</p>
</li>
<li><p class="first">Drag the right purple triangle to resize the selected chunk of motion layer.</p>
<p>Note that the left purple triangle allows you to move the selected chunk of motion layer.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since a chunk of motion layer may contain <strong>Motion keyframes</strong>, they are moved as the selection is moved.
They also adapt themselves to the new size of the selection.
As the size of the selection grows, the duration between <strong>Motion keyframes</strong> grows too.</p>
</div>
</div>
<div class="section" id="exporting-c-python">
<h3>Exporting C++ / Python<a class="headerlink" href="#exporting-c-python" title="Permalink to this headline">¶</a></h3>
<p>To export an animation to C++ or Python code:</p>
<ol class="arabic">
<li><p class="first">Select one or several <strong>Motion keyframes</strong>.</p>
</li>
<li><p class="first">Right-click them and select <strong>Export motion to clipboard</strong>.</p>
</li>
<li><p class="first">Select a language (<strong>C++</strong> or <strong>Python</strong>) and a mode (<strong>bezier</strong> or <strong>simplified</strong>).</p>
</li>
<li><p class="first">Paste it in your code.</p>
<p>The robot will make the same movements when this code is executed.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="behavior-layers">
<span id="choregraphe-interface-timeline-panel-behavior-layers-area"></span><span id="timeline-panel-behavior-layers-area"></span><h2>Behavior layers<a class="headerlink" href="#behavior-layers" title="Permalink to this headline">¶</a></h2>
<p><strong>Behavior layers</strong> area allows you to add
<a class="reference internal" href="#choregraphe-reference-box-behavior-layer"><em>Behavior layer(s)</em></a> to the Timeline,
which basically represent what NAO is going to do in addition to his movements.</p>
<img alt="../../../_images/behavior_layers.png" src="../../../_images/behavior_layers.png" style="width: 518px; height: 207px;" />
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="31%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Part</th>
<th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>A</strong></td>
<td><img alt="timeline-add-button" class="img-inline" src="../../../_images/timeline_add_layers.png" /> <strong>Add</strong> button</td>
<td>Allows you to add one or more
<a class="reference internal" href="#choregraphe-reference-box-behavior-layer"><em>Behavior layers</em></a></td>
</tr>
<tr class="row-odd"><td><strong>B</strong></td>
<td><a class="reference internal" href="#choregraphe-reference-box-behavior-layer"><em>Behavior layer</em></a></td>
<td><p class="first">Click the <strong>Activation</strong> button to enable or disable a <strong>Behavior layer</strong>:</p>
<ul class="simple">
<li><img alt="timeline-enabled-button" class="img-inline" src="../../../_images/behavior_layers_blue_round_full.png" /> means the <strong>Behavior layer</strong> is enabled.</li>
<li><img alt="timeline-disabled-button" class="img-inline" src="../../../_images/behavior_layers_blue_round_empty.png" /> means the <strong>Behavior layer</strong> is disabled,
it is hidden and will not be loaded nor executed.</li>
</ul>
<p>Click the name of a <strong>Behavior layer</strong>, to edit it.</p>
<p class="last">Click the <img alt="timeline-delete-button" class="img-inline" src="../../../_images/timeline_delete_layers.png" /> <strong>Delete</strong> button to delete the <strong>Behavior layer</strong>.</p>
</td>
</tr>
<tr class="row-even"><td><strong>C</strong></td>
<td><a class="reference internal" href="#choregraphe-reference-box-behavior-keyframe"><em>Behavior keyframe</em></a></td>
<td>Each <strong>Behavior layer</strong> can run one or several
<a class="reference internal" href="#choregraphe-reference-box-behavior-keyframe"><em>Behavior keyframes</em></a> sequentially.</td>
</tr>
</tbody>
</table>
<div class="section" id="behavior-layer">
<span id="choregraphe-reference-box-behavior-layer"></span><h3>Behavior layer<a class="headerlink" href="#behavior-layer" title="Permalink to this headline">¶</a></h3>
<p>A <strong>Behavior layer</strong> is constituted by
<a class="reference internal" href="#choregraphe-reference-box-behavior-keyframe"><em>Behavior keyframes</em></a>, sequentially organized.</p>
<p>Creating more than one <strong>Behavior layer</strong> allows to get two <strong>Behavior keyframes</strong>
active at the same time i.e. synchronize two <strong>Flow diagrams</strong>.</p>
</div>
<div class="section" id="behavior-keyframe">
<span id="choregraphe-reference-box-behavior-keyframe"></span><h3>Behavior keyframe<a class="headerlink" href="#behavior-keyframe" title="Permalink to this headline">¶</a></h3>
<p>A <strong>Behavior keyframe</strong> is a <a class="reference internal" href="../panels/flow_diagram_panel.html#choregraphe-reference-box-flow-diagram"><em>Flow diagram</em></a>
which is applied on a range of <a class="reference internal" href="#choregraphe-reference-box-frame"><em>Frames</em></a> of the <strong>Timeline</strong>.</p>
<img alt="../../../_images/chore_ref_behavior_keyframe.png" src="../../../_images/chore_ref_behavior_keyframe.png" style="width: 600px; height: 274px;" />
<div class="section" id="behavior-keyframe-execution">
<h4>Behavior keyframe execution<a class="headerlink" href="#behavior-keyframe-execution" title="Permalink to this headline">¶</a></h4>
<p>As soon as the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a> gets within this range of Frames,
the <strong>Flow diagram</strong> of the <strong>Behavior keyframe</strong> is <a class="reference internal" href="../reference.html#choregraphe-reference-loading-unloading"><em>loaded</em></a>.</p>
<p>As soon as the <a class="reference internal" href="#choregraphe-reference-box-timeline-time-cursor"><em>Time cursor</em></a> gets out of the range of Frames of the <strong>Behavior keyframe</strong>,
its <strong>Flow diagram</strong> is <a class="reference internal" href="../reference.html#choregraphe-reference-loading-unloading"><em>unloaded</em></a>.</p>
</div>
<div class="section" id="adding">
<h4>Adding<a class="headerlink" href="#adding" title="Permalink to this headline">¶</a></h4>
<p>To insert a new <strong>Behavior keyframe</strong> in a <strong>Behavior layer</strong>:</p>
<ol class="arabic simple">
<li>Right-click the Frame you want to insert the <strong>Behavior keyframe</strong> to and choose <strong>Insert KeyFrame</strong>.</li>
<li>Double-click on the <strong>Behavior keyframe</strong>.</li>
<li>Set its <strong>name</strong>, its start frame in the <strong>index</strong> field, and its <strong>image</strong>.</li>
</ol>
</div>
<div class="section" id="id2">
<h4>Selecting<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>To select:</p>
<ul class="simple">
<li>a <strong>Behavior keyframe</strong>, simply click it.</li>
<li>several <strong>Behavior keyframes</strong>, Drag a selection rectangle around them.</li>
<li>all <strong>Behavior keyframes</strong> from a <strong>Behavior layer</strong>,
right-click the concerned <strong>Behavior layer</strong> area and choose <strong>Selection</strong> &gt; <strong>Select from layer</strong>.</li>
<li>all <strong>Behavior keyframes</strong>, right-click the <strong>Behavior layers</strong> area and choose <strong>Selection</strong> &gt; <strong>Select all</strong>.</li>
</ul>
</div>
<div class="section" id="editing">
<h4>Editing<a class="headerlink" href="#editing" title="Permalink to this headline">¶</a></h4>
<p>To move <strong>Behavior keyframes</strong> within the <strong>Behavior layer</strong>, simply drag them.</p>
<p>They can also be <strong>cut</strong>, <strong>copied</strong>, <strong>pasted</strong> and <strong>deleted</strong> through the contextual menu.</p>
</div>
</div>
</div>
<div class="section" id="timeline-options">
<span id="timeline-panel-details-area"></span><h2>Timeline options<a class="headerlink" href="#timeline-options" title="Permalink to this headline">¶</a></h2>
<p>The <strong>Edit</strong> button of a <strong>Timeline</strong> allows you to set the following <strong>Timeline</strong> parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>FPS</strong></td>
<td><div class="first last line-block">
<div class="line">Stand for <strong>Frame Per Second</strong>.</div>
<div class="line">Sets the execution speed of the <strong>Timeline</strong>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><strong>Size</strong></td>
<td>Size of the <strong>Timeline</strong> in number of frames.</td>
</tr>
<tr class="row-even"><td><strong>Resources Acquisition</strong></td>
<td><p class="first">Allows you to manage conflicts between commands sent to the same joint.</p>
<p>You can choose several modes:</p>
<ul class="simple">
<li><strong>Passive</strong>: The motion will be done if it can be done. If it cannot,
then it will not.</li>
<li><strong>Waiting</strong>: The motion will be done as soon as the joints will be
available i.e. not being doing another motion.</li>
<li><strong>Aggressive Mode (unsafe)</strong>: The motion will be done anyway, even if
another command has been asked on the same joint.</li>
</ul>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p>The <strong>Resources Acquisition</strong> setting should <strong>not be used anymore</strong>
as an improved solution has been provided which enables you to set
the <a class="reference internal" href="box_optional_components.html#choregraphe-reference-box-resource"><em>resources</em></a> used by
each box and some more settings.</p>
<p class="last">We recommend you to update your older behaviors and set the
<a class="reference internal" href="box_optional_components.html#choregraphe-reference-box-resource"><em>resources</em></a> of the boxes
of your behaviors. To do so, see the section
<a class="reference internal" href="box_optional_components.html#choregraphe-howto-set-resources-for-box"><em>How to set resources in a box</em></a>.</p>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="timeline-editor">
<span id="choregraphe-detailed-interface-timeline-editor"></span><h2>Timeline Editor<a class="headerlink" href="#timeline-editor" title="Permalink to this headline">¶</a></h2>
<p>The Timeline Editor has two <strong>edition modes</strong>:</p>
<ul class="simple">
<li><a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor-worksheet"><em>Worksheet</em></a>.</li>
<li><a class="reference internal" href="#choregraphe-detailed-interface-timeline-editor-curves"><em>Curves</em></a>.</li>
</ul>
<p>In both modes, there are <strong>toolbars</strong> available on the top of the window.</p>
<p>The first toolbar is displayed as follows:</p>
<img alt="../../../_images/timeline_editor_toolbar1.png" src="../../../_images/timeline_editor_toolbar1.png" />
<p>Here are the actions you can make with this toolbar:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Button(s)</th>
<th class="head">Function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="../../../_images/undo_redo_buttons.png" class="first last" src="../../../_images/undo_redo_buttons.png" />
</td>
<td><p class="first">The classical <strong>undo</strong> and <strong>redo</strong> buttons.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">These buttons <strong>does not affect only the timeline</strong>.
They affect most of the actions you made in the behavior, even those which were out of the Timeline Editor.</p>
</div>
</td>
</tr>
<tr class="row-odd"><td><img alt="../../../_images/timeline_editor_mode.png" class="first last" src="../../../_images/timeline_editor_mode.png" />
</td>
<td><p class="first">These buttons enables you to select the <strong>edition mode</strong>:</p>
<ul class="simple">
<li>Left button to select <strong>Curves</strong>.</li>
<li>Right button to select <strong>Worksheet</strong>.</li>
</ul>
<p class="last">The second mode is selected by default.</p>
</td>
</tr>
<tr class="row-even"><td><img alt="../../../_images/chore_rec_switch.png" class="first last" src="../../../_images/chore_rec_switch.png" />
</td>
<td>Activates or deactivate the <strong>recording mode</strong>.</td>
</tr>
<tr class="row-odd"><td><img alt="../../../_images/chore_rec_start.png" class="first" src="../../../_images/chore_rec_start.png" />
<img alt="../../../_images/chore_rec_stop.png" class="last" src="../../../_images/chore_rec_stop.png" />
</td>
<td><strong>Starts</strong> or <strong>stops</strong> the motion recording.
Automatically activates the <strong>animation mode</strong>.
This button is only enabled when the <strong>recording mode</strong> is activated.
A recording can also stop by itself when it reaches the last frame.
The recording will be done in the current range selection, or, if there is no such selection, between the <a class="reference internal" href="#choregraphe-reference-box-frame-start"><em>start</em></a> and the <a class="reference internal" href="#choregraphe-reference-box-frame-end"><em>end frame</em></a> of current timeline.</td>
</tr>
<tr class="row-even"><td><img alt="../../../_images/chore_rec_settings.png" class="first last" src="../../../_images/chore_rec_settings.png" />
</td>
<td>Edit the <strong>recording settings</strong>.</td>
</tr>
</tbody>
</table>
<p>The <strong>recording settings</strong> are presented as below:</p>
<img alt="../../../_images/chore_recording_mode_settings.png" src="../../../_images/chore_recording_mode_settings.png" />
<p>The available settings are:</p>
<ul>
<li><p class="first"><strong>Mode</strong>: The way you record joint positions.
You can choose between:</p>
<ul class="simple">
<li><strong>Periodic</strong>: positions of the recorded joints are <strong>regularly stored</strong>.</li>
<li><strong>Interactive with bumpers</strong>: positions of the recorded joints are stored each time you <strong>press the left foot bumper</strong>.
Pressing on the <strong>right foot bumper</strong> sets the stiffness of the recorded joints.</li>
<li><strong>Interactive with chest button</strong>: positions of the recorded joints are stored each time you <strong>press the torso button</strong> or you say <strong>&#8220;store position&#8221;</strong>.
NAO&#8217;s <strong>ear LEDs flash</strong> when he understands &#8220;store position&#8221;.</li>
</ul>
</li>
<li><p class="first"><strong>Time step</strong>: time elapsing between two stored keyframes.
Indeed whatever the way you record joint positions, the keyframes created at each storage will be the same time step apart.</p>
</li>
<li><p class="first"><strong>Allow timeline extension</strong>:</p>
<p>If this option is unchecked, the recording will <strong>automatically stop</strong> when the <a class="reference internal" href="#choregraphe-reference-box-frame-end"><em>end frame</em></a> is encountered.</p>
<p>If it is checked, the recording will <strong>continue</strong> as long as the user did not press the <strong>Stop</strong> button.</p>
<p>In that case, the timeline contents after what was supposed to be the last frame will be &#8220;pushed&#8221; at the end of the recording.</p>
</li>
</ul>
<p>To know how to use the <strong>recording settings</strong> refer to the tutorial: <a class="reference internal" href="../tutos/movements.html#choregraphe-tuto-recording-mode"><em>Creating a movement using the recording mode</em></a>.</p>
<p>Whenever the <strong>recording mode</strong> is active, two additional columns appear in the table of the joints:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Column</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="../../../_images/chore_record.png" class="first last" src="../../../_images/chore_record.png" />
</td>
<td>If this option is activated, all the children joints of this joint will be <strong>recorded</strong>.</td>
</tr>
<tr class="row-odd"><td><img alt="../../../_images/chore_replay.png" class="first last" src="../../../_images/chore_replay.png" />
</td>
<td>If this option is activated, all the children joints of this joint will be <strong>played during the recording</strong>.</td>
</tr>
</tbody>
</table>
<p>In both mode, you can see the <strong>list of joints and groups of joints</strong>.
For example the group <strong>Legs</strong> contains the group <strong>Left leg</strong> which contains the group <strong>Left ankle</strong> which contains the joints <strong>LAnklePitch</strong> and <strong>LAnkleRoll</strong>.</p>
<p>To <strong>expand</strong> a group of joints, click on the <strong>+</strong> button next to its name.
To <strong>unexpand</strong> it, click on the <strong>-</strong> button next to its name.</p>
<p>You can <strong>select</strong> a joint or a group of joints by simply clicking on it.</p>
<p>You can <strong>enable or disable</strong> a joint or a group of joints by clicking on the <strong>blue round</strong> on the right of its name:</p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="95%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><img alt="../../../_images/behavior_layers_blue_round_empty.png" class="first last" src="../../../_images/behavior_layers_blue_round_empty.png" />
</th>
<th class="head">The joint or the group of joints is <strong>disabled</strong>.
It will not be loaded nor executed.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><img alt="../../../_images/behavior_layers_blue_round_full.png" class="first last" src="../../../_images/behavior_layers_blue_round_full.png" />
</td>
<td>The joint or the group of joints is <strong>enabled</strong>.</td>
</tr>
</tbody>
</table>
<div class="section" id="timeline-editor-worksheet">
<span id="choregraphe-detailed-interface-timeline-editor-worksheet"></span><h3>Timeline Editor: Worksheet<a class="headerlink" href="#timeline-editor-worksheet" title="Permalink to this headline">¶</a></h3>
<p>The default <strong>motion recording mode</strong> is the Worksheet mode.</p>
<img alt="../../../_images/chore_curve_editor_worksheet.png" src="../../../_images/chore_curve_editor_worksheet.png" />
<p>In this mode you see the <strong>motion keyframes</strong> of each joint and each group of joints.</p>
<p>Each joint and group of joints and its corresponding motion keyframes are on the same line.</p>
<p>Each <strong>motion keyframe</strong> that belong to a group of joints is represented by a grey rectangle when the group is not expanded and by a grey oval when it is expanded.</p>
<p>Motion keyframe that belong to a joint is represented by a grey rectangle.</p>
<p>All the keyframes are placed along an horizontal axis that indicates the frame number as in the <a class="reference internal" href="#choregraphe-interface-timeline-panel"><em>Timeline panel</em></a>.</p>
<p>You have the same options on motion keyframes as in the <a class="reference internal" href="#choregraphe-interface-timeline-panel"><em>Timeline panel</em></a>.
And the rectangles representing motion keyframes get the same way <strong>orange</strong> when they are selected.
A rectangle or an oval representing motion keyframes for a group of joints can have an intermediate greyish orange color, when only a part of their child keyframes is selected.</p>
<p>Moreover, you can use the option <strong>Selection</strong> &gt; <strong>Select from layer</strong> of the right-click menu to select <strong>all motion keyframes for a joint or a group of joint</strong>.</p>
</div>
<div class="section" id="timeline-editor-curves">
<span id="choregraphe-detailed-interface-timeline-editor-curves"></span><h3>Timeline Editor: Curves<a class="headerlink" href="#timeline-editor-curves" title="Permalink to this headline">¶</a></h3>
<p>The second <strong>motion recording mode</strong> is the Curves mode.
In this mode you see only the <strong>motion keyframes</strong> corresponding to the <strong>selected joints</strong>.</p>
<img alt="../../../_images/chore_curve_editor_curves.png" src="../../../_images/chore_curve_editor_curves.png" />
<p>Each <strong>joint</strong> is represented by a <strong>curve</strong> in a different <strong>colour</strong>.
You can choose the colour of each joint in the column with the following <strong>paintbrush</strong> button:</p>
<img alt="../../../_images/paintbrush.png" src="../../../_images/paintbrush.png" />
<p>Each <strong>keyframe</strong> is placed along the horizontal axis as in the Worksheet mode.
But it is also placed along the vertical axis which represents the angle value of the joint.</p>
<p>In the Curves mode, you can <strong>move</strong>, <strong>cut</strong>, <strong>copy</strong> and <strong>paste</strong> motion keyframes.</p>
<p>When this mode is activated, several buttons are added in the toolbar:</p>
<p>The first six buttons are used to set interpolation modes for each keyframe.</p>
<p>Each keyframe are linked with the previous and the next keyframe with interpolated curves.</p>
<p>The interpolation modes of the left and right curves of a keyframe can be adjusted.</p>
<p>Changing the interpolation modes will not affect the position of the key so the value and the frame will remain unchanged.</p>
<p>It will affect the shape of the curves depending on which interpolation mode is chosen.</p>
<p>Clicking on one of these buttons will set the interpolation mode for both right and left curves of the key.</p>
<p>Here is all the interpolation modes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="../../../_images/chore_tangent_constant.png" class="first last" src="../../../_images/chore_tangent_constant.png" />
</td>
<td><strong>Constant:</strong> the value of the key is applied to the actuator up to the next keyframe.
This won&#8217;t give smooth movements on the robot, but it can be used to implement &#8220;robotic movement&#8221; effects.</td>
</tr>
<tr class="row-even"><td><img alt="../../../_images/chore_tangent_linear.png" class="first last" src="../../../_images/chore_tangent_linear.png" />
</td>
<td><strong>Linear:</strong> the value is interpolated linearly toward the next key.</td>
</tr>
<tr class="row-odd"><td><img alt="../../../_images/chore_tangent_auto.png" class="first last" src="../../../_images/chore_tangent_auto.png" />
</td>
<td><strong>Automatic bezier:</strong> a Bezier curve interpolation is used, but the curve parameters are computed automatically by Choregraphe to give smooth and good looking movements.
This is the default mode for new keyframes.
In that mode, contrary to all other Bezier mode, the tangents of the curve at the key are not displayed by default.
They can be shown by checking the &#8220;Show tangents&#8221; button (described below). Automatic tangents, when visible, are not editable,
and are displayed in blue rather than black to distinguish them easily.</td>
</tr>
<tr class="row-even"><td><img alt="../../../_images/chore_tangent_bezier.png" class="first last" src="../../../_images/chore_tangent_bezier.png" />
</td>
<td><strong>Bezier:</strong> this mode (and the following two) also implements a bezier interpolation, but here the curve parameters are now adjustable by the user.
Two tangent handles will appear next to the key to control the curve slope.</td>
</tr>
<tr class="row-odd"><td><img alt="../../../_images/chore_tangent_smooth.png" class="first last" src="../../../_images/chore_tangent_smooth.png" />
</td>
<td><strong>Smooth:</strong> this is a Bezier mode too, but with an additional constraint, the two tangents of the key (on the left and on the right) must be aligned.
Note however that if a key is only smooth on one of its side, the constraint won&#8217;t be enforced.</td>
</tr>
<tr class="row-even"><td><img alt="../../../_images/chore_tangent_symmetrical.png" class="first last" src="../../../_images/chore_tangent_symmetrical.png" />
</td>
<td><strong>Symmetrical:</strong> this is similar to the Smooth mode, with another constraint: the length of the two key tangents have relative sizes,
so moving one not only keep the other aligned but also moves it horizontally to have an even smoother movement.
Like the Smooth mode, the symmetry constraint will only be applied if both tangents are flagged symmetrical.</td>
</tr>
</tbody>
</table>
<p>The functions of the next buttons are gathered in the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="95%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="../../../_images/timeline_editor.png" class="first last" src="../../../_images/timeline_editor.png" />
</td>
<td>Displays the <strong>Curve key edit</strong> that is used to set key value and left and right interpolation modes.</td>
</tr>
<tr class="row-even"><td><img alt="../../../_images/chore_simplify.png" class="first last" src="../../../_images/chore_simplify.png" />
</td>
<td>Reduce the number of keyframes in the curves and still keep a similar motion.</td>
</tr>
<tr class="row-odd"><td><img alt="../../../_images/chore_show_tangents.png" class="first last" src="../../../_images/chore_show_tangents.png" />
</td>
<td>When this button is checked, the automatic tangents of the curve that are not editable are displayed in the curve view.
It is useful to mix automatic keyframes with manually adjusted ones.</td>
</tr>
<tr class="row-even"><td><img alt="../../../_images/chore_key_selection.png" class="first last" src="../../../_images/chore_key_selection.png" />
</td>
<td>When this button is checked, you are in the selection mode. Drawing a rectangle with a left mouse click will select a group of keys.</td>
</tr>
<tr class="row-odd"><td><img alt="../../../_images/chore_zoom_area_selection.png" class="first last" src="../../../_images/chore_zoom_area_selection.png" />
</td>
<td>When this button is checked, you are in the zoom area selection mode. Drawing a rectangle with a left mouse click will zoom the view so that it fits that rectangle.</td>
</tr>
<tr class="row-even"><td><img alt="../../../_images/chore_viewport_scroll.png" class="first last" src="../../../_images/chore_viewport_scroll.png" />
</td>
<td>When this button is checked, you are in the viewport drag mode. In that mode, the mouse cursor becomes a hand.
Dragging the cursor while pressing the left mouse button will scroll the view.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
          <div class="footernav">
    &laquo; <a href="flow_diagram_box.html" title="Flow diagram box">Flow diagram box</a>
     |
    <a href="../main_objects.html" title="Mastering the main objects" accesskey="U">Mastering the main objects</a>
   |
    <a href="../advanced_panels.html" title="Advanced panels">Advanced panels</a> &raquo;</div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/software/choregraphe/objects/timeline_box.txt"
             rel="nofollow">Show Source</a></li>
    </ul>


  <h3>Table Of Contents</h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../contents.html">Site map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../news/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nao/index.html">NAO</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Software</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../requirements.html">Software Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html">Software Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../choregraphe_overview.html">Choregraphe overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../monitor/index.html">Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../naosim/index.html">NAOsim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../naoflasher/index.html">NAOFlasher</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Choregraphe User Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../starting_discovery.html">Getting started</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../main_objects.html">Mastering the main objects</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="choregraphe_project.html">Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="behavior.html">Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="box.html">Box</a></li>
<li class="toctree-l4"><a class="reference internal" href="box_input_output.html">Box - Inputs/outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="box_optional_components.html">Box - Optional components</a></li>
<li class="toctree-l4"><a class="reference internal" href="script_box.html">Script box</a></li>
<li class="toctree-l4"><a class="reference internal" href="flow_diagram_box.html">Flow diagram box</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="">Timeline box</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced_panels.html">Advanced panels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscel.html">How to ...</a></li>
<li class="toctree-l3"><a class="reference internal" href="../customizing.html">Customizing Choregraphe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutos/index.html">Choregraphe Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutos/troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/index.html">Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ref/index.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../legal/notice.html">Legal notices</a></li>
</ul>

    <h3><a href="../../../index.html">On this page</a></h3>
    <ul>
<li><a class="reference internal" href="#">Timeline box</a><ul>
<li><a class="reference internal" href="#what-is-a-timeline-box">What is a Timeline box</a></li>
<li><a class="reference internal" href="#how-to-create-a-timeline-box">How to create a Timeline box</a></li>
<li><a class="reference internal" href="#timeline-panel">Timeline panel</a></li>
<li><a class="reference internal" href="#what-is-a-timeline">What is a Timeline</a><ul>
<li><a class="reference internal" href="#timeline-execution">Timeline execution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#frame-ruler">Frame ruler</a><ul>
<li><a class="reference internal" href="#frames">Frames</a><ul>
<li><a class="reference internal" href="#start-frame">Start frame</a></li>
<li><a class="reference internal" href="#end-frame">End frame</a></li>
<li><a class="reference internal" href="#how-to-set-start-and-end-frames">How to set Start and End frames</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-cursor">Time cursor</a><ul>
<li><a class="reference internal" href="#value-of-the-time-cursor">Value of the Time cursor</a></li>
<li><a class="reference internal" href="#how-to-get-the-value-of-the-time-cursor">How to get the value of the Time cursor</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#motion-layer">Motion layer</a><ul>
<li><a class="reference internal" href="#motion-keyframe">Motion keyframe</a></li>
<li><a class="reference internal" href="#interpolation">Interpolation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#editing-motion-keyframes">Editing Motion keyframes</a><ul>
<li><a class="reference internal" href="#motion-ruler">Motion ruler</a></li>
<li><a class="reference internal" href="#creating">Creating</a></li>
<li><a class="reference internal" href="#selecting">Selecting</a></li>
<li><a class="reference internal" href="#removing">Removing</a></li>
<li><a class="reference internal" href="#moving">Moving</a></li>
<li><a class="reference internal" href="#mirroring">Mirroring</a></li>
<li><a class="reference internal" href="#spreading-tightening">Spreading / tightening</a></li>
<li><a class="reference internal" href="#exporting-c-python">Exporting C++ / Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#behavior-layers">Behavior layers</a><ul>
<li><a class="reference internal" href="#behavior-layer">Behavior layer</a></li>
<li><a class="reference internal" href="#behavior-keyframe">Behavior keyframe</a><ul>
<li><a class="reference internal" href="#behavior-keyframe-execution">Behavior keyframe execution</a></li>
<li><a class="reference internal" href="#adding">Adding</a></li>
<li><a class="reference internal" href="#id2">Selecting</a></li>
<li><a class="reference internal" href="#editing">Editing</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#timeline-options">Timeline options</a></li>
<li><a class="reference internal" href="#timeline-editor">Timeline Editor</a><ul>
<li><a class="reference internal" href="#timeline-editor-worksheet">Timeline Editor: Worksheet</a></li>
<li><a class="reference internal" href="#timeline-editor-curves">Timeline Editor: Curves</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="flow_diagram_box.html" title="Flow diagram box">previous</a>
     |
    <a href="../main_objects.html" title="Mastering the main objects" accesskey="U">up</a>
   |
    <a href="../advanced_panels.html" title="Advanced panels">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>